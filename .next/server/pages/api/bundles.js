"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/bundles";
exports.ids = ["pages/api/bundles"];
exports.modules = {

/***/ "@shopify/shopify-api":
/*!***************************************!*\
  !*** external "@shopify/shopify-api" ***!
  \***************************************/
/***/ ((module) => {

module.exports = require("@shopify/shopify-api");

/***/ }),

/***/ "@shopify/shopify-api/adapters/node":
/*!*****************************************************!*\
  !*** external "@shopify/shopify-api/adapters/node" ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = require("@shopify/shopify-api/adapters/node");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbundles&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fbundles%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbundles&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fbundles%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_bundles_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/bundles/index.ts */ \"(api)/./src/pages/api/bundles/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_bundles_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_bundles_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/bundles\",\n        pathname: \"/api/bundles\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_bundles_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmJ1bmRsZXMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlMkZwYWdlcyUyRmFwaSUyRmJ1bmRsZXMlMkZpbmRleC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUM2RDtBQUM3RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsNERBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDREQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2J1bmRsci1wcm8vPzk0M2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvYnVuZGxlcy9pbmRleC50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2J1bmRsZXNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9idW5kbGVzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbundles&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fbundles%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/dbConnect.ts":
/*!******************************!*\
  !*** ./src/lib/dbConnect.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\nconst connection = {};\nasync function dbConnect() {\n    if (connection.isConnected) {\n        return;\n    }\n    try {\n        const db = await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI);\n        connection.isConnected = db.connections[0].readyState;\n    } catch (error) {\n        console.error(\"Error connecting to MongoDB:\", error);\n        throw error;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2RiQ29ubmVjdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQ1I7QUFFSjtBQU1BLE1BQU1DLGFBQXlCLENBQUM7QUFFaEMsZUFBZUM7SUFDYixJQUFJRCxXQUFXRSxXQUFXLEVBQUU7UUFDMUI7SUFDRjtJQUVBLElBQUk7UUFDRixNQUFNQyxLQUFLLE1BQU1SLHVEQUFnQixDQUFDQztRQUNsQ0ksV0FBV0UsV0FBVyxHQUFHQyxHQUFHRSxXQUFXLENBQUMsRUFBRSxDQUFDQyxVQUFVO0lBQ3ZELEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsZ0NBQWdDQTtRQUM5QyxNQUFNQTtJQUNSO0FBQ0Y7QUFFQSxpRUFBZU4sU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2J1bmRsci1wcm8vLi9zcmMvbGliL2RiQ29ubmVjdC50cz82MGE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkhO1xuXG5pZiAoIU1PTkdPREJfVVJJKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAnUGxlYXNlIGRlZmluZSB0aGUgTU9OR09EQl9VUkkgZW52aXJvbm1lbnQgdmFyaWFibGUgaW5zaWRlIC5lbnYubG9jYWwnXG4gICk7XG59XG5cbmludGVyZmFjZSBDb25uZWN0aW9uIHtcbiAgaXNDb25uZWN0ZWQ/OiBudW1iZXI7XG59XG5cbmNvbnN0IGNvbm5lY3Rpb246IENvbm5lY3Rpb24gPSB7fTtcblxuYXN5bmMgZnVuY3Rpb24gZGJDb25uZWN0KCkge1xuICBpZiAoY29ubmVjdGlvbi5pc0Nvbm5lY3RlZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJKTtcbiAgICBjb25uZWN0aW9uLmlzQ29ubmVjdGVkID0gZGIuY29ubmVjdGlvbnNbMF0ucmVhZHlTdGF0ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjb25uZWN0aW5nIHRvIE1vbmdvREI6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRiQ29ubmVjdDsgIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiTU9OR09EQl9VUkkiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJjb25uZWN0aW9uIiwiZGJDb25uZWN0IiwiaXNDb25uZWN0ZWQiLCJkYiIsImNvbm5lY3QiLCJjb25uZWN0aW9ucyIsInJlYWR5U3RhdGUiLCJlcnJvciIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/dbConnect.ts\n");

/***/ }),

/***/ "(api)/./src/models/Bundle.ts":
/*!******************************!*\
  !*** ./src/models/Bundle.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst BundleSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    shopId: {\n        type: String,\n        required: true,\n        index: true\n    },\n    name: {\n        type: String,\n        required: true\n    },\n    description: {\n        type: String\n    },\n    products: [\n        {\n            productId: {\n                type: String,\n                required: true\n            },\n            variantId: {\n                type: String,\n                required: true\n            },\n            quantity: {\n                type: Number,\n                required: true,\n                min: 1\n            }\n        }\n    ],\n    discountRules: [\n        {\n            type: {\n                type: String,\n                required: true,\n                enum: [\n                    \"percentage\",\n                    \"fixed\",\n                    \"bxgy\",\n                    \"tiered\"\n                ]\n            },\n            value: {\n                type: Number,\n                required: true\n            },\n            minQuantity: {\n                type: Number\n            },\n            freeQuantity: {\n                type: Number\n            },\n            tiers: [\n                {\n                    quantity: {\n                        type: Number\n                    },\n                    discount: {\n                        type: Number\n                    }\n                }\n            ]\n        }\n    ],\n    isActive: {\n        type: Boolean,\n        default: true\n    },\n    validFrom: {\n        type: Date\n    },\n    validTo: {\n        type: Date\n    },\n    displaySettings: {\n        showOnProduct: {\n            type: Boolean,\n            default: true\n        },\n        showOnCollection: {\n            type: Boolean,\n            default: true\n        },\n        showInCart: {\n            type: Boolean,\n            default: true\n        },\n        showOnBundlePage: {\n            type: Boolean,\n            default: true\n        }\n    }\n}, {\n    timestamps: true\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Bundle || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Bundle\", BundleSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbW9kZWxzL0J1bmRsZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0Q7QUFzQ3RELE1BQU1FLGVBQXVCLElBQUlELDRDQUFNQSxDQUFDO0lBQ3RDRSxRQUFRO1FBQUVDLE1BQU1DO1FBQVFDLFVBQVU7UUFBTUMsT0FBTztJQUFLO0lBQ3BEQyxNQUFNO1FBQUVKLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUNyQ0csYUFBYTtRQUFFTCxNQUFNQztJQUFPO0lBQzVCSyxVQUFVO1FBQUM7WUFDVEMsV0FBVztnQkFBRVAsTUFBTUM7Z0JBQVFDLFVBQVU7WUFBSztZQUMxQ00sV0FBVztnQkFBRVIsTUFBTUM7Z0JBQVFDLFVBQVU7WUFBSztZQUMxQ08sVUFBVTtnQkFBRVQsTUFBTVU7Z0JBQVFSLFVBQVU7Z0JBQU1TLEtBQUs7WUFBRTtRQUNuRDtLQUFFO0lBQ0ZDLGVBQWU7UUFBQztZQUNkWixNQUFNO2dCQUFFQSxNQUFNQztnQkFBUUMsVUFBVTtnQkFBTVcsTUFBTTtvQkFBQztvQkFBYztvQkFBUztvQkFBUTtpQkFBUztZQUFDO1lBQ3RGQyxPQUFPO2dCQUFFZCxNQUFNVTtnQkFBUVIsVUFBVTtZQUFLO1lBQ3RDYSxhQUFhO2dCQUFFZixNQUFNVTtZQUFPO1lBQzVCTSxjQUFjO2dCQUFFaEIsTUFBTVU7WUFBTztZQUM3Qk8sT0FBTztnQkFBQztvQkFDTlIsVUFBVTt3QkFBRVQsTUFBTVU7b0JBQU87b0JBQ3pCUSxVQUFVO3dCQUFFbEIsTUFBTVU7b0JBQU87Z0JBQzNCO2FBQUU7UUFDSjtLQUFFO0lBQ0ZTLFVBQVU7UUFBRW5CLE1BQU1vQjtRQUFTQyxTQUFTO0lBQUs7SUFDekNDLFdBQVc7UUFBRXRCLE1BQU11QjtJQUFLO0lBQ3hCQyxTQUFTO1FBQUV4QixNQUFNdUI7SUFBSztJQUN0QkUsaUJBQWlCO1FBQ2ZDLGVBQWU7WUFBRTFCLE1BQU1vQjtZQUFTQyxTQUFTO1FBQUs7UUFDOUNNLGtCQUFrQjtZQUFFM0IsTUFBTW9CO1lBQVNDLFNBQVM7UUFBSztRQUNqRE8sWUFBWTtZQUFFNUIsTUFBTW9CO1lBQVNDLFNBQVM7UUFBSztRQUMzQ1Esa0JBQWtCO1lBQUU3QixNQUFNb0I7WUFBU0MsU0FBUztRQUFLO0lBQ25EO0FBQ0YsR0FBRztJQUNEUyxZQUFZO0FBQ2Q7QUFFQSxpRUFBZWxDLHdEQUFlLENBQUNvQyxNQUFNLElBQUlwQyxxREFBYyxDQUFVLFVBQVVFLGFBQWFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9idW5kbHItcHJvLy4vc3JjL21vZGVscy9CdW5kbGUudHM/YzFlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UsIHsgU2NoZW1hLCBEb2N1bWVudCB9IGZyb20gJ21vbmdvb3NlJztcblxuZXhwb3J0IGludGVyZmFjZSBJUHJvZHVjdCB7XG4gIHByb2R1Y3RJZDogc3RyaW5nO1xuICB2YXJpYW50SWQ6IHN0cmluZztcbiAgcXVhbnRpdHk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRGlzY291bnRSdWxlIHtcbiAgdHlwZTogJ3BlcmNlbnRhZ2UnIHwgJ2ZpeGVkJyB8ICdieGd5JyB8ICd0aWVyZWQnO1xuICB2YWx1ZTogbnVtYmVyO1xuICBtaW5RdWFudGl0eT86IG51bWJlcjtcbiAgZnJlZVF1YW50aXR5PzogbnVtYmVyO1xuICB0aWVycz86IEFycmF5PHtcbiAgICBxdWFudGl0eTogbnVtYmVyO1xuICAgIGRpc2NvdW50OiBudW1iZXI7XG4gIH0+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCdW5kbGUgZXh0ZW5kcyBEb2N1bWVudCB7XG4gIHNob3BJZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHByb2R1Y3RzOiBJUHJvZHVjdFtdO1xuICBkaXNjb3VudFJ1bGVzOiBJRGlzY291bnRSdWxlW107XG4gIGlzQWN0aXZlOiBib29sZWFuO1xuICB2YWxpZEZyb20/OiBEYXRlO1xuICB2YWxpZFRvPzogRGF0ZTtcbiAgZGlzcGxheVNldHRpbmdzOiB7XG4gICAgc2hvd09uUHJvZHVjdDogYm9vbGVhbjtcbiAgICBzaG93T25Db2xsZWN0aW9uOiBib29sZWFuO1xuICAgIHNob3dJbkNhcnQ6IGJvb2xlYW47XG4gICAgc2hvd09uQnVuZGxlUGFnZTogYm9vbGVhbjtcbiAgfTtcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG59XG5cbmNvbnN0IEJ1bmRsZVNjaGVtYTogU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHNob3BJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCBpbmRleDogdHJ1ZSB9LFxuICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgZGVzY3JpcHRpb246IHsgdHlwZTogU3RyaW5nIH0sXG4gIHByb2R1Y3RzOiBbe1xuICAgIHByb2R1Y3RJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgdmFyaWFudElkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBxdWFudGl0eTogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlLCBtaW46IDEgfVxuICB9XSxcbiAgZGlzY291bnRSdWxlczogW3tcbiAgICB0eXBlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIGVudW06IFsncGVyY2VudGFnZScsICdmaXhlZCcsICdieGd5JywgJ3RpZXJlZCddIH0sXG4gICAgdmFsdWU6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIG1pblF1YW50aXR5OiB7IHR5cGU6IE51bWJlciB9LFxuICAgIGZyZWVRdWFudGl0eTogeyB0eXBlOiBOdW1iZXIgfSxcbiAgICB0aWVyczogW3tcbiAgICAgIHF1YW50aXR5OiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgZGlzY291bnQ6IHsgdHlwZTogTnVtYmVyIH1cbiAgICB9XVxuICB9XSxcbiAgaXNBY3RpdmU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSB9LFxuICB2YWxpZEZyb206IHsgdHlwZTogRGF0ZSB9LFxuICB2YWxpZFRvOiB7IHR5cGU6IERhdGUgfSxcbiAgZGlzcGxheVNldHRpbmdzOiB7XG4gICAgc2hvd09uUHJvZHVjdDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH0sXG4gICAgc2hvd09uQ29sbGVjdGlvbjogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH0sXG4gICAgc2hvd0luQ2FydDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH0sXG4gICAgc2hvd09uQnVuZGxlUGFnZTogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH1cbiAgfVxufSwge1xuICB0aW1lc3RhbXBzOiB0cnVlXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLkJ1bmRsZSB8fCBtb25nb29zZS5tb2RlbDxJQnVuZGxlPignQnVuZGxlJywgQnVuZGxlU2NoZW1hKTsgIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiQnVuZGxlU2NoZW1hIiwic2hvcElkIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiaW5kZXgiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJwcm9kdWN0cyIsInByb2R1Y3RJZCIsInZhcmlhbnRJZCIsInF1YW50aXR5IiwiTnVtYmVyIiwibWluIiwiZGlzY291bnRSdWxlcyIsImVudW0iLCJ2YWx1ZSIsIm1pblF1YW50aXR5IiwiZnJlZVF1YW50aXR5IiwidGllcnMiLCJkaXNjb3VudCIsImlzQWN0aXZlIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJ2YWxpZEZyb20iLCJEYXRlIiwidmFsaWRUbyIsImRpc3BsYXlTZXR0aW5ncyIsInNob3dPblByb2R1Y3QiLCJzaG93T25Db2xsZWN0aW9uIiwic2hvd0luQ2FydCIsInNob3dPbkJ1bmRsZVBhZ2UiLCJ0aW1lc3RhbXBzIiwibW9kZWxzIiwiQnVuZGxlIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/models/Bundle.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/bundles/index.ts":
/*!****************************************!*\
  !*** ./src/pages/api/bundles/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @shopify/shopify-api */ \"@shopify/shopify-api\");\n/* harmony import */ var _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_shopify_shopify_api__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _shopify_shopify_api_adapters_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @shopify/shopify-api/adapters/node */ \"@shopify/shopify-api/adapters/node\");\n/* harmony import */ var _shopify_shopify_api_adapters_node__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_shopify_shopify_api_adapters_node__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _models_Bundle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../models/Bundle */ \"(api)/./src/models/Bundle.ts\");\n/* harmony import */ var _lib_dbConnect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/dbConnect */ \"(api)/./src/lib/dbConnect.ts\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n// Initialize Shopify API\nconst shopify = (0,_shopify_shopify_api__WEBPACK_IMPORTED_MODULE_0__.shopifyApi)({\n    apiKey: process.env.SHOPIFY_API_KEY,\n    apiSecretKey: process.env.SHOPIFY_API_SECRET,\n    scopes: process.env.SHOPIFY_APP_SCOPES?.split(\",\") || [],\n    hostName: process.env.HOST,\n    apiVersion: _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_0__.LATEST_API_VERSION,\n    isEmbeddedApp: true,\n    hostScheme: \"https\",\n    isPrivateApp: false,\n    userAgentPrefix: \"BundlrPro\"\n});\nasync function handler(req, res) {\n    try {\n        // Get the shop from query parameters or cookies\n        const shop = req.query.shop || req.cookies[\"shop\"];\n        const session = req.cookies[\"shopify_session\"];\n        if (!shop || !session) {\n            console.error(\"Missing shop or session:\", {\n                shop,\n                session\n            });\n            return res.status(401).json({\n                error: \"Unauthorized\"\n            });\n        }\n        // Connect to database\n        try {\n            await (0,_lib_dbConnect__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n            console.log(\"Successfully connected to MongoDB\");\n        } catch (dbError) {\n            console.error(\"Database connection error:\", dbError);\n            return res.status(500).json({\n                error: \"Database connection failed\"\n            });\n        }\n        // Handle different HTTP methods\n        switch(req.method){\n            case \"GET\":\n                try {\n                    // Get all active bundles for the current shop\n                    const bundles = await _models_Bundle__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find({\n                        shopId: shop,\n                        isActive: true,\n                        $and: [\n                            {\n                                $or: [\n                                    {\n                                        validFrom: {\n                                            $exists: false\n                                        }\n                                    },\n                                    {\n                                        validFrom: {\n                                            $lte: new Date()\n                                        }\n                                    }\n                                ]\n                            },\n                            {\n                                $or: [\n                                    {\n                                        validTo: {\n                                            $exists: false\n                                        }\n                                    },\n                                    {\n                                        validTo: {\n                                            $gte: new Date()\n                                        }\n                                    }\n                                ]\n                            }\n                        ]\n                    }).sort({\n                        createdAt: -1\n                    }).exec();\n                    return res.status(200).json(bundles);\n                } catch (error) {\n                    console.error(\"Error fetching bundles:\", error);\n                    return res.status(500).json({\n                        error: \"Failed to fetch bundles\"\n                    });\n                }\n            case \"POST\":\n                try {\n                    // Log the request body for debugging\n                    console.log(\"Creating bundle with data:\", req.body);\n                    // Validate bundle data\n                    const { name, products, discountRules } = req.body;\n                    if (!name || !products?.length || !discountRules?.length) {\n                        console.error(\"Missing required fields:\", {\n                            name,\n                            products,\n                            discountRules\n                        });\n                        return res.status(400).json({\n                            error: \"Missing required fields: name, products, or discountRules\"\n                        });\n                    }\n                    // Validate products array\n                    if (!Array.isArray(products)) {\n                        console.error(\"Products must be an array:\", products);\n                        return res.status(400).json({\n                            error: \"Products must be an array\"\n                        });\n                    }\n                    // Validate each product\n                    for (const product of products){\n                        if (!product.productId || !product.variantId || !product.quantity) {\n                            console.error(\"Invalid product data:\", product);\n                            return res.status(400).json({\n                                error: \"Invalid product data. Each product must have productId, variantId, and quantity.\"\n                            });\n                        }\n                    }\n                    // Validate discount rules\n                    if (!Array.isArray(discountRules)) {\n                        console.error(\"Discount rules must be an array:\", discountRules);\n                        return res.status(400).json({\n                            error: \"Discount rules must be an array\"\n                        });\n                    }\n                    // Validate each discount rule\n                    for (const rule of discountRules){\n                        if (!rule.type || !rule.value) {\n                            console.error(\"Invalid discount rule:\", rule);\n                            return res.status(400).json({\n                                error: \"Invalid discount rule. Each rule must have type and value.\"\n                            });\n                        }\n                        // Validate rule type\n                        if (![\n                            \"percentage\",\n                            \"fixed\",\n                            \"bxgy\",\n                            \"tiered\"\n                        ].includes(rule.type)) {\n                            console.error(\"Invalid discount rule type:\", rule.type);\n                            return res.status(400).json({\n                                error: \"Invalid discount rule type. Must be one of: percentage, fixed, bxgy, tiered.\"\n                            });\n                        }\n                        // Validate rule value\n                        if (typeof rule.value !== \"number\" || rule.value < 0) {\n                            console.error(\"Invalid discount rule value:\", rule.value);\n                            return res.status(400).json({\n                                error: \"Invalid discount rule value. Must be a non-negative number.\"\n                            });\n                        }\n                        // Validate additional properties based on type\n                        if (rule.type === \"bxgy\" && (!rule.minQuantity || !rule.freeQuantity)) {\n                            console.error(\"Invalid bxgy rule:\", rule);\n                            return res.status(400).json({\n                                error: \"Buy X Get Y rules must have minQuantity and freeQuantity.\"\n                            });\n                        }\n                        if (rule.type === \"tiered\" && (!rule.tiers || !Array.isArray(rule.tiers))) {\n                            console.error(\"Invalid tiered rule:\", rule);\n                            return res.status(400).json({\n                                error: \"Tiered rules must have a tiers array.\"\n                            });\n                        }\n                    }\n                    // Create a new bundle\n                    const newBundle = await _models_Bundle__WEBPACK_IMPORTED_MODULE_2__[\"default\"].create({\n                        name,\n                        description: req.body.description || \"\",\n                        products,\n                        discountRules,\n                        shopId: shop,\n                        isActive: true,\n                        displaySettings: {\n                            showOnProduct: true,\n                            showOnCollection: true,\n                            showInCart: true,\n                            showOnBundlePage: true\n                        }\n                    });\n                    console.log(\"Successfully created bundle:\", newBundle);\n                    return res.status(201).json(newBundle);\n                } catch (error) {\n                    console.error(\"Error creating bundle:\", error);\n                    if (error instanceof (mongoose__WEBPACK_IMPORTED_MODULE_4___default().Error).ValidationError) {\n                        const validationErrors = Object.values(error.errors).map((err)=>{\n                            if (err instanceof (mongoose__WEBPACK_IMPORTED_MODULE_4___default().Error).ValidatorError) {\n                                return err.message;\n                            }\n                            return \"Invalid field value\";\n                        });\n                        return res.status(400).json({\n                            error: \"Validation error\",\n                            details: validationErrors\n                        });\n                    }\n                    return res.status(500).json({\n                        error: \"Failed to create bundle\"\n                    });\n                }\n            default:\n                return res.status(405).json({\n                    error: \"Method not allowed\"\n                });\n        }\n    } catch (error) {\n        console.error(\"Bundles API error:\", error);\n        return res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZTs0QkFDZkMsa0JBQWtCOzRCQUNsQkMsWUFBWTs0QkFDWkMsa0JBQWtCO3dCQUNwQjtvQkFDRjtvQkFFQS9DLFFBQVFJLEdBQUcsQ0FBQyxnQ0FBZ0NvQztvQkFDNUMsT0FBTzdDLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNxQztnQkFDOUIsRUFBRSxPQUFPdkMsT0FBTztvQkFDZEQsUUFBUUMsS0FBSyxDQUFDLDBCQUEwQkE7b0JBQ3hDLElBQUlBLGlCQUFpQjFCLHVEQUFjLENBQUMwRSxlQUFlLEVBQUU7d0JBQ25ELE1BQU1DLG1CQUFtQkMsT0FBT0MsTUFBTSxDQUFDbkQsTUFBTW9ELE1BQU0sRUFBRUMsR0FBRyxDQUFDLENBQUNDOzRCQUN4RCxJQUFJQSxlQUFlaEYsdURBQWMsQ0FBQ2lGLGNBQWMsRUFBRTtnQ0FDaEQsT0FBT0QsSUFBSUUsT0FBTzs0QkFDcEI7NEJBQ0EsT0FBTzt3QkFDVDt3QkFDQSxPQUFPOUQsSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQzs0QkFDMUJGLE9BQU87NEJBQ1B5RCxTQUFTUjt3QkFDWDtvQkFDRjtvQkFDQSxPQUFPdkQsSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQzt3QkFBRUYsT0FBTztvQkFBMEI7Z0JBQ2pFO1lBRUY7Z0JBQ0UsT0FBT04sSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUYsT0FBTztnQkFBcUI7UUFDOUQ7SUFDRixFQUFFLE9BQU9BLE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLHNCQUFzQkE7UUFDcEMsT0FBT04sSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFRixPQUFPO1FBQXdCO0lBQy9EO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9idW5kbHItcHJvLy4vc3JjL3BhZ2VzL2FwaS9idW5kbGVzL2luZGV4LnRzP2EwZmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgc2hvcGlmeUFwaSwgTEFURVNUX0FQSV9WRVJTSU9OIH0gZnJvbSAnQHNob3BpZnkvc2hvcGlmeS1hcGknO1xuaW1wb3J0ICdAc2hvcGlmeS9zaG9waWZ5LWFwaS9hZGFwdGVycy9ub2RlJztcbmltcG9ydCBCdW5kbGUgZnJvbSAnLi4vLi4vLi4vbW9kZWxzL0J1bmRsZSc7XG5pbXBvcnQgZGJDb25uZWN0IGZyb20gJy4uLy4uLy4uL2xpYi9kYkNvbm5lY3QnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuLy8gSW5pdGlhbGl6ZSBTaG9waWZ5IEFQSVxuY29uc3Qgc2hvcGlmeSA9IHNob3BpZnlBcGkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52LlNIT1BJRllfQVBJX0tFWSEsXG4gIGFwaVNlY3JldEtleTogcHJvY2Vzcy5lbnYuU0hPUElGWV9BUElfU0VDUkVUISxcbiAgc2NvcGVzOiBwcm9jZXNzLmVudi5TSE9QSUZZX0FQUF9TQ09QRVM/LnNwbGl0KCcsJykgfHwgW10sXG4gIGhvc3ROYW1lOiBwcm9jZXNzLmVudi5IT1NUISxcbiAgYXBpVmVyc2lvbjogTEFURVNUX0FQSV9WRVJTSU9OLFxuICBpc0VtYmVkZGVkQXBwOiB0cnVlLFxuICBob3N0U2NoZW1lOiAnaHR0cHMnLFxuICBpc1ByaXZhdGVBcHA6IGZhbHNlLFxuICB1c2VyQWdlbnRQcmVmaXg6ICdCdW5kbHJQcm8nLFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgdGhlIHNob3AgZnJvbSBxdWVyeSBwYXJhbWV0ZXJzIG9yIGNvb2tpZXNcbiAgICBjb25zdCBzaG9wID0gcmVxLnF1ZXJ5LnNob3AgfHwgcmVxLmNvb2tpZXNbJ3Nob3AnXTtcbiAgICBjb25zdCBzZXNzaW9uID0gcmVxLmNvb2tpZXNbJ3Nob3BpZnlfc2Vzc2lvbiddO1xuXG4gICAgaWYgKCFzaG9wIHx8ICFzZXNzaW9uKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdNaXNzaW5nIHNob3Agb3Igc2Vzc2lvbjonLCB7IHNob3AsIHNlc3Npb24gfSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgfVxuXG4gICAgLy8gQ29ubmVjdCB0byBkYXRhYmFzZVxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkYkNvbm5lY3QoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIE1vbmdvREInKTtcbiAgICB9IGNhdGNoIChkYkVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGVycm9yOicsIGRiRXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcgfSk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGRpZmZlcmVudCBIVFRQIG1ldGhvZHNcbiAgICBzd2l0Y2ggKHJlcS5tZXRob2QpIHtcbiAgICAgIGNhc2UgJ0dFVCc6XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gR2V0IGFsbCBhY3RpdmUgYnVuZGxlcyBmb3IgdGhlIGN1cnJlbnQgc2hvcFxuICAgICAgICAgIGNvbnN0IGJ1bmRsZXMgPSBhd2FpdCBCdW5kbGUuZmluZCh7IFxuICAgICAgICAgICAgc2hvcElkOiBzaG9wLFxuICAgICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgICAkYW5kOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkb3I6IFtcbiAgICAgICAgICAgICAgICAgIHsgdmFsaWRGcm9tOiB7ICRleGlzdHM6IGZhbHNlIH0gfSxcbiAgICAgICAgICAgICAgICAgIHsgdmFsaWRGcm9tOiB7ICRsdGU6IG5ldyBEYXRlKCkgfSB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJG9yOiBbXG4gICAgICAgICAgICAgICAgICB7IHZhbGlkVG86IHsgJGV4aXN0czogZmFsc2UgfSB9LFxuICAgICAgICAgICAgICAgICAgeyB2YWxpZFRvOiB7ICRndGU6IG5ldyBEYXRlKCkgfSB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcbiAgICAgICAgICAuZXhlYygpO1xuXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1bmRsZXMpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGJ1bmRsZXM6JywgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIGJ1bmRsZXMnIH0pO1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgJ1BPU1QnOlxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIExvZyB0aGUgcmVxdWVzdCBib2R5IGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgYnVuZGxlIHdpdGggZGF0YTonLCByZXEuYm9keSk7XG5cbiAgICAgICAgICAvLyBWYWxpZGF0ZSBidW5kbGUgZGF0YVxuICAgICAgICAgIGNvbnN0IHsgbmFtZSwgcHJvZHVjdHMsIGRpc2NvdW50UnVsZXMgfSA9IHJlcS5ib2R5O1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghbmFtZSB8fCAhcHJvZHVjdHM/Lmxlbmd0aCB8fCAhZGlzY291bnRSdWxlcz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczonLCB7IG5hbWUsIHByb2R1Y3RzLCBkaXNjb3VudFJ1bGVzIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgICAgICAgIGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IG5hbWUsIHByb2R1Y3RzLCBvciBkaXNjb3VudFJ1bGVzJyBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFZhbGlkYXRlIHByb2R1Y3RzIGFycmF5XG4gICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHByb2R1Y3RzKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignUHJvZHVjdHMgbXVzdCBiZSBhbiBhcnJheTonLCBwcm9kdWN0cyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1Byb2R1Y3RzIG11c3QgYmUgYW4gYXJyYXknIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFZhbGlkYXRlIGVhY2ggcHJvZHVjdFxuICAgICAgICAgIGZvciAoY29uc3QgcHJvZHVjdCBvZiBwcm9kdWN0cykge1xuICAgICAgICAgICAgaWYgKCFwcm9kdWN0LnByb2R1Y3RJZCB8fCAhcHJvZHVjdC52YXJpYW50SWQgfHwgIXByb2R1Y3QucXVhbnRpdHkpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBwcm9kdWN0IGRhdGE6JywgcHJvZHVjdCk7XG4gICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBwcm9kdWN0IGRhdGEuIEVhY2ggcHJvZHVjdCBtdXN0IGhhdmUgcHJvZHVjdElkLCB2YXJpYW50SWQsIGFuZCBxdWFudGl0eS4nIFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBWYWxpZGF0ZSBkaXNjb3VudCBydWxlc1xuICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShkaXNjb3VudFJ1bGVzKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRGlzY291bnQgcnVsZXMgbXVzdCBiZSBhbiBhcnJheTonLCBkaXNjb3VudFJ1bGVzKTtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRGlzY291bnQgcnVsZXMgbXVzdCBiZSBhbiBhcnJheScgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gVmFsaWRhdGUgZWFjaCBkaXNjb3VudCBydWxlXG4gICAgICAgICAgZm9yIChjb25zdCBydWxlIG9mIGRpc2NvdW50UnVsZXMpIHtcbiAgICAgICAgICAgIGlmICghcnVsZS50eXBlIHx8ICFydWxlLnZhbHVlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgZGlzY291bnQgcnVsZTonLCBydWxlKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIGRpc2NvdW50IHJ1bGUuIEVhY2ggcnVsZSBtdXN0IGhhdmUgdHlwZSBhbmQgdmFsdWUuJyBcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIHJ1bGUgdHlwZVxuICAgICAgICAgICAgaWYgKCFbJ3BlcmNlbnRhZ2UnLCAnZml4ZWQnLCAnYnhneScsICd0aWVyZWQnXS5pbmNsdWRlcyhydWxlLnR5cGUpKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgZGlzY291bnQgcnVsZSB0eXBlOicsIHJ1bGUudHlwZSk7XG4gICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBkaXNjb3VudCBydWxlIHR5cGUuIE11c3QgYmUgb25lIG9mOiBwZXJjZW50YWdlLCBmaXhlZCwgYnhneSwgdGllcmVkLicgXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBydWxlIHZhbHVlXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJ1bGUudmFsdWUgIT09ICdudW1iZXInIHx8IHJ1bGUudmFsdWUgPCAwKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgZGlzY291bnQgcnVsZSB2YWx1ZTonLCBydWxlLnZhbHVlKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIGRpc2NvdW50IHJ1bGUgdmFsdWUuIE11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLicgXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgYmFzZWQgb24gdHlwZVxuICAgICAgICAgICAgaWYgKHJ1bGUudHlwZSA9PT0gJ2J4Z3knICYmICghcnVsZS5taW5RdWFudGl0eSB8fCAhcnVsZS5mcmVlUXVhbnRpdHkpKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgYnhneSBydWxlOicsIHJ1bGUpO1xuICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcbiAgICAgICAgICAgICAgICBlcnJvcjogJ0J1eSBYIEdldCBZIHJ1bGVzIG11c3QgaGF2ZSBtaW5RdWFudGl0eSBhbmQgZnJlZVF1YW50aXR5LicgXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocnVsZS50eXBlID09PSAndGllcmVkJyAmJiAoIXJ1bGUudGllcnMgfHwgIUFycmF5LmlzQXJyYXkocnVsZS50aWVycykpKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgdGllcmVkIHJ1bGU6JywgcnVsZSk7XG4gICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICAgICAgICAgIGVycm9yOiAnVGllcmVkIHJ1bGVzIG11c3QgaGF2ZSBhIHRpZXJzIGFycmF5LicgXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBidW5kbGVcbiAgICAgICAgICBjb25zdCBuZXdCdW5kbGUgPSBhd2FpdCBCdW5kbGUuY3JlYXRlKHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcmVxLmJvZHkuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgICBwcm9kdWN0cyxcbiAgICAgICAgICAgIGRpc2NvdW50UnVsZXMsXG4gICAgICAgICAgICBzaG9wSWQ6IHNob3AsXG4gICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICAgIGRpc3BsYXlTZXR0aW5nczoge1xuICAgICAgICAgICAgICBzaG93T25Qcm9kdWN0OiB0cnVlLFxuICAgICAgICAgICAgICBzaG93T25Db2xsZWN0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICBzaG93SW5DYXJ0OiB0cnVlLFxuICAgICAgICAgICAgICBzaG93T25CdW5kbGVQYWdlOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGNyZWF0ZWQgYnVuZGxlOicsIG5ld0J1bmRsZSk7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKG5ld0J1bmRsZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgYnVuZGxlOicsIGVycm9yKTtcbiAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBtb25nb29zZS5FcnJvci5WYWxpZGF0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSBPYmplY3QudmFsdWVzKGVycm9yLmVycm9ycykubWFwKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIG1vbmdvb3NlLkVycm9yLlZhbGlkYXRvckVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVyci5tZXNzYWdlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiAnSW52YWxpZCBmaWVsZCB2YWx1ZSc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICAgICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZXJyb3InLCBcbiAgICAgICAgICAgICAgZGV0YWlsczogdmFsaWRhdGlvbkVycm9yc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBidW5kbGUnIH0pO1xuICAgICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQnVuZGxlcyBBUEkgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsic2hvcGlmeUFwaSIsIkxBVEVTVF9BUElfVkVSU0lPTiIsIkJ1bmRsZSIsImRiQ29ubmVjdCIsIm1vbmdvb3NlIiwic2hvcGlmeSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJTSE9QSUZZX0FQSV9LRVkiLCJhcGlTZWNyZXRLZXkiLCJTSE9QSUZZX0FQSV9TRUNSRVQiLCJzY29wZXMiLCJTSE9QSUZZX0FQUF9TQ09QRVMiLCJzcGxpdCIsImhvc3ROYW1lIiwiSE9TVCIsImFwaVZlcnNpb24iLCJpc0VtYmVkZGVkQXBwIiwiaG9zdFNjaGVtZSIsImlzUHJpdmF0ZUFwcCIsInVzZXJBZ2VudFByZWZpeCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzaG9wIiwicXVlcnkiLCJjb29raWVzIiwic2Vzc2lvbiIsImNvbnNvbGUiLCJlcnJvciIsInN0YXR1cyIsImpzb24iLCJsb2ciLCJkYkVycm9yIiwibWV0aG9kIiwiYnVuZGxlcyIsImZpbmQiLCJzaG9wSWQiLCJpc0FjdGl2ZSIsIiRhbmQiLCIkb3IiLCJ2YWxpZEZyb20iLCIkZXhpc3RzIiwiJGx0ZSIsIkRhdGUiLCJ2YWxpZFRvIiwiJGd0ZSIsInNvcnQiLCJjcmVhdGVkQXQiLCJleGVjIiwiYm9keSIsIm5hbWUiLCJwcm9kdWN0cyIsImRpc2NvdW50UnVsZXMiLCJsZW5ndGgiLCJBcnJheSIsImlzQXJyYXkiLCJwcm9kdWN0IiwicHJvZHVjdElkIiwidmFyaWFudElkIiwicXVhbnRpdHkiLCJydWxlIiwidHlwZSIsInZhbHVlIiwiaW5jbHVkZXMiLCJtaW5RdWFudGl0eSIsImZyZWVRdWFudGl0eSIsInRpZXJzIiwibmV3QnVuZGxlIiwiY3JlYXRlIiwiZGVzY3JpcHRpb24iLCJkaXNwbGF5U2V0dGluZ3MiLCJzaG93T25Qcm9kdWN0Iiwic2hvd09uQ29sbGVjdGlvbiIsInNob3dJbkNhcnQiLCJzaG93T25CdW5kbGVQYWdlIiwiRXJyb3IiLCJWYWxpZGF0aW9uRXJyb3IiLCJ2YWxpZGF0aW9uRXJyb3JzIiwiT2JqZWN0IiwidmFsdWVzIiwiZXJyb3JzIiwibWFwIiwiZXJyIiwiVmFsaWRhdG9yRXJyb3IiLCJtZXNzYWdlIiwiZGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/bundles/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbundles&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fbundles%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();