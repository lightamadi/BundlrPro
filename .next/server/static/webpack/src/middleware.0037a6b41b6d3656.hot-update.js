"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(middleware)/./node_modules/next/dist/esm/server/web/exports/next-response.js\");\n/* harmony import */ var _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @shopify/shopify-api */ \"(middleware)/./node_modules/@shopify/shopify-api/lib/index.js\");\n/* harmony import */ var _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _shopify_shopify_api_adapters_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @shopify/shopify-api/adapters/node */ \"(middleware)/./node_modules/@shopify/shopify-api/adapters/node/index.js\");\n\n\n\n\n// Initialize Shopify API\nconst shopify = (0,_shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__.shopifyApi)({\n    apiKey: process.env.SHOPIFY_API_KEY,\n    apiSecretKey: process.env.SHOPIFY_API_SECRET,\n    scopes: process.env.SHOPIFY_APP_SCOPES?.split(\",\") || [],\n    hostName: process.env.HOST,\n    apiVersion: _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__.LATEST_API_VERSION,\n    isEmbeddedApp: true,\n    hostScheme: \"https\",\n    isPrivateApp: false,\n    userAgentPrefix: \"BundlrPro\",\n    adminApiAccessToken: process.env.SHOPIFY_ADMIN_ACCESS_TOKEN,\n    billing: undefined,\n    webhooks: {\n        APP_UNINSTALLED: {\n            deliveryMethod: _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__.DeliveryMethod.Http,\n            callbackUrl: \"/api/webhooks\"\n        }\n    }\n});\nasync function middleware(request) {\n    try {\n        const response = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].next();\n        // Add CORS headers for Shopify\n        response.headers.set(\"Access-Control-Allow-Origin\", \"https://*.myshopify.com\");\n        response.headers.set(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\n        response.headers.set(\"Access-Control-Allow-Headers\", \"X-Requested-With, Content-Type, Authorization\");\n        response.headers.set(\"Access-Control-Allow-Credentials\", \"true\");\n        // Comprehensive CSP for Shopify embedded app\n        response.headers.set(\"Content-Security-Policy\", `\n      frame-ancestors https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com;\n      default-src 'self' https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com https://cdn.shopify.com;\n      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      style-src 'self' 'unsafe-inline' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      img-src 'self' data: blob: https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      connect-src 'self' https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com https://cdn.shopify.com wss://*.shopify.com;\n      font-src 'self' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      media-src 'self' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      object-src 'none';\n      frame-src https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com;\n    `.replace(/\\s+/g, \" \").trim());\n        // Skip auth for API routes and auth callback\n        if (request.nextUrl.pathname.startsWith(\"/api/\")) {\n            return response;\n        }\n        const shop = request.nextUrl.searchParams.get(\"shop\");\n        const host = request.nextUrl.searchParams.get(\"host\");\n        const shopifyCookie = request.cookies.get(\"shopify_session\");\n        // If we have a valid session cookie, allow the request\n        if (shopifyCookie) {\n            return response;\n        }\n        // If we're not in the Shopify admin context, redirect to Shopify admin\n        if (!shop || !host) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(`https://admin.shopify.com/store/${process.env.SHOPIFY_HOST}/apps/bundlrpro`);\n        }\n        // Begin auth process\n        const redirectUri = `https://${request.headers.get(\"host\")}/api/auth/callback`;\n        const authUrl = `https://${shop}/admin/oauth/authorize?client_id=${process.env.SHOPIFY_API_KEY}&scope=${process.env.SHOPIFY_APP_SCOPES}&redirect_uri=${encodeURIComponent(redirectUri)}&state=${generateNonce()}`;\n        const authResponse = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(authUrl);\n        authResponse.cookies.set(\"shopify_oauth_state\", generateNonce(), {\n            secure: true,\n            sameSite: \"none\",\n            path: \"/\",\n            httpOnly: true\n        });\n        return authResponse;\n    } catch (error) {\n        console.error(\"Middleware error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Authentication failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Generate a random nonce for OAuth state parameter\nfunction generateNonce() {\n    return Math.random().toString(36).substring(2, 15);\n}\nconst config = {\n    matcher: [\n        /*\n     * Match all paths except for:\n     * 1. /api routes\n     * 2. /_next (Next.js internals)\n     * 3. /static (inside /public)\n     * 4. all root files inside /public (e.g. /favicon.ico)\n     */ \"/((?!api/|_next/|_static/|[\\\\w-]+\\\\.\\\\w+).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJDO0FBRTJCO0FBQzFCO0FBQ1U7QUFFdEQseUJBQXlCO0FBQ3pCLE1BQU1JLFVBQVVILGdFQUFVQSxDQUFDO0lBQ3pCSSxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGVBQWU7SUFDbkNDLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ0csa0JBQWtCO0lBQzVDQyxRQUFRTCxRQUFRQyxHQUFHLENBQUNLLGtCQUFrQixFQUFFQyxNQUFNLFFBQVEsRUFBRTtJQUN4REMsVUFBVVIsUUFBUUMsR0FBRyxDQUFDUSxJQUFJO0lBQzFCQyxZQUFZZCxvRUFBa0JBO0lBQzlCZSxlQUFlO0lBQ2ZDLFlBQVk7SUFDWkMsY0FBYztJQUNkQyxpQkFBaUI7SUFDakJDLHFCQUFxQmYsUUFBUUMsR0FBRyxDQUFDZSwwQkFBMEI7SUFDM0RDLFNBQVNDO0lBQ1RDLFVBQVU7UUFDUkMsaUJBQWlCO1lBQ2ZDLGdCQUFnQnhCLGdFQUFjQSxDQUFDeUIsSUFBSTtZQUNuQ0MsYUFBYTtRQUNmO0lBQ0Y7QUFDRjtBQUVPLGVBQWVDLFdBQVdDLE9BQW9CO0lBQ25ELElBQUk7UUFDRixNQUFNQyxXQUFXaEMsdUZBQWlCO1FBRWxDLCtCQUErQjtRQUMvQmdDLFNBQVNFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLCtCQUErQjtRQUNwREgsU0FBU0UsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0NBQWdDO1FBQ3JESCxTQUFTRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQ0FBZ0M7UUFDckRILFNBQVNFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG9DQUFvQztRQUV6RCw2Q0FBNkM7UUFDN0NILFNBQVNFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDJCQUEyQixDQUFDOzs7Ozs7Ozs7OztJQVdqRCxDQUFDLENBQUNDLE9BQU8sQ0FBQyxRQUFRLEtBQUtDLElBQUk7UUFFM0IsNkNBQTZDO1FBQzdDLElBQUlOLFFBQVFPLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsVUFBVTtZQUNoRCxPQUFPUjtRQUNUO1FBRUEsTUFBTVMsT0FBT1YsUUFBUU8sT0FBTyxDQUFDSSxZQUFZLENBQUNDLEdBQUcsQ0FBQztRQUM5QyxNQUFNQyxPQUFPYixRQUFRTyxPQUFPLENBQUNJLFlBQVksQ0FBQ0MsR0FBRyxDQUFDO1FBQzlDLE1BQU1FLGdCQUFnQmQsUUFBUWUsT0FBTyxDQUFDSCxHQUFHLENBQUM7UUFFMUMsdURBQXVEO1FBQ3ZELElBQUlFLGVBQWU7WUFDakIsT0FBT2I7UUFDVDtRQUVBLHVFQUF1RTtRQUN2RSxJQUFJLENBQUNTLFFBQVEsQ0FBQ0csTUFBTTtZQUNsQixPQUFPNUMsMkZBQXFCLENBQzFCLENBQUMsZ0NBQWdDLEVBQUVNLFFBQVFDLEdBQUcsQ0FBQ3lDLFlBQVksQ0FBQyxlQUFlLENBQUM7UUFFaEY7UUFFQSxxQkFBcUI7UUFDckIsTUFBTUMsY0FBYyxDQUFDLFFBQVEsRUFBRWxCLFFBQVFHLE9BQU8sQ0FBQ1MsR0FBRyxDQUFDLFFBQVEsa0JBQWtCLENBQUM7UUFDOUUsTUFBTU8sVUFBVSxDQUFDLFFBQVEsRUFBRVQsS0FBSyxpQ0FBaUMsRUFBRW5DLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZSxDQUFDLE9BQU8sRUFBRUYsUUFBUUMsR0FBRyxDQUFDSyxrQkFBa0IsQ0FBQyxjQUFjLEVBQUV1QyxtQkFBbUJGLGFBQWEsT0FBTyxFQUFFRyxnQkFBZ0IsQ0FBQztRQUVqTixNQUFNQyxlQUFlckQsMkZBQXFCLENBQUNrRDtRQUMzQ0csYUFBYVAsT0FBTyxDQUFDWCxHQUFHLENBQUMsdUJBQXVCaUIsaUJBQWlCO1lBQy9ERSxRQUFRO1lBQ1JDLFVBQVU7WUFDVkMsTUFBTTtZQUNOQyxVQUFVO1FBQ1o7UUFDQSxPQUFPSjtJQUNULEVBQUUsT0FBT0ssT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMscUJBQXFCQTtRQUNuQyxPQUFPMUQsdUZBQWlCLENBQUM7WUFBRTBELE9BQU87UUFBd0IsR0FBRztZQUFFRyxRQUFRO1FBQUk7SUFDN0U7QUFDRjtBQUVBLG9EQUFvRDtBQUNwRCxTQUFTVDtJQUNQLE9BQU9VLEtBQUtDLE1BQU0sR0FBR0MsUUFBUSxDQUFDLElBQUlDLFNBQVMsQ0FBQyxHQUFHO0FBQ2pEO0FBRU8sTUFBTUMsU0FBUztJQUNwQkMsU0FBUztRQUNQOzs7Ozs7S0FNQyxHQUNEO0tBQ0Q7QUFDSCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9taWRkbGV3YXJlLnRzP2QxOTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHR5cGUgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHNob3BpZnlBcGksIExBVEVTVF9BUElfVkVSU0lPTiB9IGZyb20gJ0BzaG9waWZ5L3Nob3BpZnktYXBpJztcbmltcG9ydCAnQHNob3BpZnkvc2hvcGlmeS1hcGkvYWRhcHRlcnMvbm9kZSc7XG5pbXBvcnQgeyBEZWxpdmVyeU1ldGhvZCB9IGZyb20gJ0BzaG9waWZ5L3Nob3BpZnktYXBpJztcblxuLy8gSW5pdGlhbGl6ZSBTaG9waWZ5IEFQSVxuY29uc3Qgc2hvcGlmeSA9IHNob3BpZnlBcGkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52LlNIT1BJRllfQVBJX0tFWSEsXG4gIGFwaVNlY3JldEtleTogcHJvY2Vzcy5lbnYuU0hPUElGWV9BUElfU0VDUkVUISxcbiAgc2NvcGVzOiBwcm9jZXNzLmVudi5TSE9QSUZZX0FQUF9TQ09QRVM/LnNwbGl0KCcsJykgfHwgW10sXG4gIGhvc3ROYW1lOiBwcm9jZXNzLmVudi5IT1NUISxcbiAgYXBpVmVyc2lvbjogTEFURVNUX0FQSV9WRVJTSU9OLFxuICBpc0VtYmVkZGVkQXBwOiB0cnVlLFxuICBob3N0U2NoZW1lOiAnaHR0cHMnLFxuICBpc1ByaXZhdGVBcHA6IGZhbHNlLFxuICB1c2VyQWdlbnRQcmVmaXg6ICdCdW5kbHJQcm8nLFxuICBhZG1pbkFwaUFjY2Vzc1Rva2VuOiBwcm9jZXNzLmVudi5TSE9QSUZZX0FETUlOX0FDQ0VTU19UT0tFTixcbiAgYmlsbGluZzogdW5kZWZpbmVkLFxuICB3ZWJob29rczoge1xuICAgIEFQUF9VTklOU1RBTExFRDoge1xuICAgICAgZGVsaXZlcnlNZXRob2Q6IERlbGl2ZXJ5TWV0aG9kLkh0dHAsXG4gICAgICBjYWxsYmFja1VybDogJy9hcGkvd2ViaG9va3MnLFxuICAgIH0sXG4gIH0sXG59KTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5uZXh0KCk7XG5cbiAgICAvLyBBZGQgQ09SUyBoZWFkZXJzIGZvciBTaG9waWZ5XG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwczovLyoubXlzaG9waWZ5LmNvbScpO1xuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEF1dGhvcml6YXRpb24nKTtcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xuXG4gICAgLy8gQ29tcHJlaGVuc2l2ZSBDU1AgZm9yIFNob3BpZnkgZW1iZWRkZWQgYXBwXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0NvbnRlbnQtU2VjdXJpdHktUG9saWN5JywgYFxuICAgICAgZnJhbWUtYW5jZXN0b3JzIGh0dHBzOi8vKi5teXNob3BpZnkuY29tIGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20gaHR0cHM6Ly9hY2NvdW50cy5zaG9waWZ5LmNvbTtcbiAgICAgIGRlZmF1bHQtc3JjICdzZWxmJyBodHRwczovLyoubXlzaG9waWZ5LmNvbSBodHRwczovL2FkbWluLnNob3BpZnkuY29tIGh0dHBzOi8vYWNjb3VudHMuc2hvcGlmeS5jb20gaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb207XG4gICAgICBzY3JpcHQtc3JjICdzZWxmJyAndW5zYWZlLWlubGluZScgJ3Vuc2FmZS1ldmFsJyBodHRwczovLyoubXlzaG9waWZ5LmNvbSBodHRwczovL2FkbWluLnNob3BpZnkuY29tIGh0dHBzOi8vY2RuLnNob3BpZnkuY29tO1xuICAgICAgc3R5bGUtc3JjICdzZWxmJyAndW5zYWZlLWlubGluZScgaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2Nkbi5zaG9waWZ5LmNvbTtcbiAgICAgIGltZy1zcmMgJ3NlbGYnIGRhdGE6IGJsb2I6IGh0dHBzOi8vKi5teXNob3BpZnkuY29tIGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20gaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb207XG4gICAgICBjb25uZWN0LXNyYyAnc2VsZicgaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2FjY291bnRzLnNob3BpZnkuY29tIGh0dHBzOi8vY2RuLnNob3BpZnkuY29tIHdzczovLyouc2hvcGlmeS5jb207XG4gICAgICBmb250LXNyYyAnc2VsZicgaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2Nkbi5zaG9waWZ5LmNvbTtcbiAgICAgIG1lZGlhLXNyYyAnc2VsZicgaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2Nkbi5zaG9waWZ5LmNvbTtcbiAgICAgIG9iamVjdC1zcmMgJ25vbmUnO1xuICAgICAgZnJhbWUtc3JjIGh0dHBzOi8vKi5teXNob3BpZnkuY29tIGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20gaHR0cHM6Ly9hY2NvdW50cy5zaG9waWZ5LmNvbTtcbiAgICBgLnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCkpO1xuXG4gICAgLy8gU2tpcCBhdXRoIGZvciBBUEkgcm91dGVzIGFuZCBhdXRoIGNhbGxiYWNrXG4gICAgaWYgKHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvYXBpLycpKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgc2hvcCA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXMuZ2V0KCdzaG9wJyk7XG4gICAgY29uc3QgaG9zdCA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXMuZ2V0KCdob3N0Jyk7XG4gICAgY29uc3Qgc2hvcGlmeUNvb2tpZSA9IHJlcXVlc3QuY29va2llcy5nZXQoJ3Nob3BpZnlfc2Vzc2lvbicpO1xuXG4gICAgLy8gSWYgd2UgaGF2ZSBhIHZhbGlkIHNlc3Npb24gY29va2llLCBhbGxvdyB0aGUgcmVxdWVzdFxuICAgIGlmIChzaG9waWZ5Q29va2llKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UncmUgbm90IGluIHRoZSBTaG9waWZ5IGFkbWluIGNvbnRleHQsIHJlZGlyZWN0IHRvIFNob3BpZnkgYWRtaW5cbiAgICBpZiAoIXNob3AgfHwgIWhvc3QpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QoXG4gICAgICAgIGBodHRwczovL2FkbWluLnNob3BpZnkuY29tL3N0b3JlLyR7cHJvY2Vzcy5lbnYuU0hPUElGWV9IT1NUfS9hcHBzL2J1bmRscnByb2BcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQmVnaW4gYXV0aCBwcm9jZXNzXG4gICAgY29uc3QgcmVkaXJlY3RVcmkgPSBgaHR0cHM6Ly8ke3JlcXVlc3QuaGVhZGVycy5nZXQoJ2hvc3QnKX0vYXBpL2F1dGgvY2FsbGJhY2tgO1xuICAgIGNvbnN0IGF1dGhVcmwgPSBgaHR0cHM6Ly8ke3Nob3B9L2FkbWluL29hdXRoL2F1dGhvcml6ZT9jbGllbnRfaWQ9JHtwcm9jZXNzLmVudi5TSE9QSUZZX0FQSV9LRVl9JnNjb3BlPSR7cHJvY2Vzcy5lbnYuU0hPUElGWV9BUFBfU0NPUEVTfSZyZWRpcmVjdF91cmk9JHtlbmNvZGVVUklDb21wb25lbnQocmVkaXJlY3RVcmkpfSZzdGF0ZT0ke2dlbmVyYXRlTm9uY2UoKX1gO1xuXG4gICAgY29uc3QgYXV0aFJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KGF1dGhVcmwpO1xuICAgIGF1dGhSZXNwb25zZS5jb29raWVzLnNldCgnc2hvcGlmeV9vYXV0aF9zdGF0ZScsIGdlbmVyYXRlTm9uY2UoKSwge1xuICAgICAgc2VjdXJlOiB0cnVlLFxuICAgICAgc2FtZVNpdGU6ICdub25lJyxcbiAgICAgIHBhdGg6ICcvJyxcbiAgICAgIGh0dHBPbmx5OiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIGF1dGhSZXNwb25zZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdNaWRkbGV3YXJlIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZCcgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG4vLyBHZW5lcmF0ZSBhIHJhbmRvbSBub25jZSBmb3IgT0F1dGggc3RhdGUgcGFyYW1ldGVyXG5mdW5jdGlvbiBnZW5lcmF0ZU5vbmNlKCkge1xuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KTtcbn1cblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgbWF0Y2hlcjogW1xuICAgIC8qXG4gICAgICogTWF0Y2ggYWxsIHBhdGhzIGV4Y2VwdCBmb3I6XG4gICAgICogMS4gL2FwaSByb3V0ZXNcbiAgICAgKiAyLiAvX25leHQgKE5leHQuanMgaW50ZXJuYWxzKVxuICAgICAqIDMuIC9zdGF0aWMgKGluc2lkZSAvcHVibGljKVxuICAgICAqIDQuIGFsbCByb290IGZpbGVzIGluc2lkZSAvcHVibGljIChlLmcuIC9mYXZpY29uLmljbylcbiAgICAgKi9cbiAgICAnLygoPyFhcGkvfF9uZXh0L3xfc3RhdGljL3xbXFxcXHctXStcXFxcLlxcXFx3KykuKiknLFxuICBdLFxufTsgIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInNob3BpZnlBcGkiLCJMQVRFU1RfQVBJX1ZFUlNJT04iLCJEZWxpdmVyeU1ldGhvZCIsInNob3BpZnkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiU0hPUElGWV9BUElfS0VZIiwiYXBpU2VjcmV0S2V5IiwiU0hPUElGWV9BUElfU0VDUkVUIiwic2NvcGVzIiwiU0hPUElGWV9BUFBfU0NPUEVTIiwic3BsaXQiLCJob3N0TmFtZSIsIkhPU1QiLCJhcGlWZXJzaW9uIiwiaXNFbWJlZGRlZEFwcCIsImhvc3RTY2hlbWUiLCJpc1ByaXZhdGVBcHAiLCJ1c2VyQWdlbnRQcmVmaXgiLCJhZG1pbkFwaUFjY2Vzc1Rva2VuIiwiU0hPUElGWV9BRE1JTl9BQ0NFU1NfVE9LRU4iLCJiaWxsaW5nIiwidW5kZWZpbmVkIiwid2ViaG9va3MiLCJBUFBfVU5JTlNUQUxMRUQiLCJkZWxpdmVyeU1ldGhvZCIsIkh0dHAiLCJjYWxsYmFja1VybCIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJuZXh0IiwiaGVhZGVycyIsInNldCIsInJlcGxhY2UiLCJ0cmltIiwibmV4dFVybCIsInBhdGhuYW1lIiwic3RhcnRzV2l0aCIsInNob3AiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJob3N0Iiwic2hvcGlmeUNvb2tpZSIsImNvb2tpZXMiLCJyZWRpcmVjdCIsIlNIT1BJRllfSE9TVCIsInJlZGlyZWN0VXJpIiwiYXV0aFVybCIsImVuY29kZVVSSUNvbXBvbmVudCIsImdlbmVyYXRlTm9uY2UiLCJhdXRoUmVzcG9uc2UiLCJzZWN1cmUiLCJzYW1lU2l0ZSIsInBhdGgiLCJodHRwT25seSIsImVycm9yIiwiY29uc29sZSIsImpzb24iLCJzdGF0dXMiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJjb25maWciLCJtYXRjaGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});