"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(middleware)/./node_modules/next/dist/esm/server/web/exports/next-response.js\");\n/* harmony import */ var _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @shopify/shopify-api */ \"(middleware)/./node_modules/@shopify/shopify-api/lib/index.js\");\n/* harmony import */ var _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _shopify_shopify_api_adapters_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @shopify/shopify-api/adapters/node */ \"(middleware)/./node_modules/@shopify/shopify-api/adapters/node/index.js\");\n\n\n\n\n// Initialize Shopify API\nconst shopify = (0,_shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__.shopifyApi)({\n    apiKey: process.env.SHOPIFY_API_KEY,\n    apiSecretKey: process.env.SHOPIFY_API_SECRET,\n    scopes: process.env.SHOPIFY_APP_SCOPES?.split(\",\") || [],\n    hostName: process.env.HOST,\n    apiVersion: _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__.LATEST_API_VERSION,\n    isEmbeddedApp: true,\n    hostScheme: \"https\",\n    isPrivateApp: false,\n    userAgentPrefix: \"BundlrPro\",\n    adminApiAccessToken: process.env.SHOPIFY_ADMIN_ACCESS_TOKEN,\n    billing: undefined,\n    webhooks: {\n        APP_UNINSTALLED: {\n            deliveryMethod: _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__.DeliveryMethod.Http,\n            callbackUrl: \"/api/webhooks\"\n        }\n    }\n});\nasync function middleware(request) {\n    try {\n        const response = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].next();\n        // Add CORS headers for Shopify\n        response.headers.set(\"Access-Control-Allow-Origin\", \"https://*.myshopify.com\");\n        response.headers.set(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\n        response.headers.set(\"Access-Control-Allow-Headers\", \"X-Requested-With, Content-Type, Authorization\");\n        response.headers.set(\"Access-Control-Allow-Credentials\", \"true\");\n        response.headers.set(\"Access-Control-Max-Age\", \"86400\");\n        // Comprehensive CSP for Shopify embedded app\n        response.headers.set(\"Content-Security-Policy\", `\n      frame-ancestors https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com;\n      default-src 'self' https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com https://cdn.shopify.com;\n      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      style-src 'self' 'unsafe-inline' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      img-src 'self' data: blob: https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      connect-src 'self' https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com https://cdn.shopify.com wss://*.shopify.com;\n      font-src 'self' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      media-src 'self' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      object-src 'none';\n      frame-src https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com;\n    `.replace(/\\s+/g, \" \").trim());\n        // Handle OPTIONS requests for CORS\n        if (request.method === \"OPTIONS\") {\n            return new next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"](null, {\n                status: 204,\n                headers: response.headers\n            });\n        }\n        // Skip auth for API routes and auth callback\n        if (request.nextUrl.pathname.startsWith(\"/api/\")) {\n            return response;\n        }\n        const shop = request.nextUrl.searchParams.get(\"shop\");\n        const host = request.nextUrl.searchParams.get(\"host\");\n        const shopifyCookie = request.cookies.get(\"shopify_session\");\n        // If we have a valid session cookie, allow the request\n        if (shopifyCookie) {\n            return response;\n        }\n        // If we're not in the Shopify admin context, redirect to Shopify admin\n        if (!shop || !host) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(`https://admin.shopify.com/store/${process.env.SHOPIFY_HOST}/apps/bundlrpro`);\n        }\n        // Begin auth process\n        const redirectUri = `https://${request.headers.get(\"host\")}/api/auth/callback`;\n        const authUrl = `https://${shop}/admin/oauth/authorize?client_id=${process.env.SHOPIFY_API_KEY}&scope=${process.env.SHOPIFY_APP_SCOPES}&redirect_uri=${encodeURIComponent(redirectUri)}&state=${generateNonce()}`;\n        const authResponse = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(authUrl);\n        authResponse.cookies.set(\"shopify_oauth_state\", generateNonce(), {\n            secure: true,\n            sameSite: \"none\",\n            path: \"/\",\n            httpOnly: true\n        });\n        return authResponse;\n    } catch (error) {\n        console.error(\"Middleware error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Authentication failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Generate a random nonce for OAuth state parameter\nfunction generateNonce() {\n    return Math.random().toString(36).substring(2, 15);\n}\nconst config = {\n    matcher: [\n        /*\n     * Match all paths except for:\n     * 1. /api routes\n     * 2. /_next (Next.js internals)\n     * 3. /static (inside /public)\n     * 4. all root files inside /public (e.g. /favicon.ico)\n     */ \"/((?!api/|_next/|_static/|[\\\\w-]+\\\\.\\\\w+).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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REUsUUFBUTtZQUNSQyxVQUFVO1lBQ1ZDLE1BQU07WUFDTkMsVUFBVTtRQUNaO1FBQ0EsT0FBT0o7SUFDVCxFQUFFLE9BQU9LLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHFCQUFxQkE7UUFDbkMsT0FBTzVELHVGQUFpQixDQUFDO1lBQUU0RCxPQUFPO1FBQXdCLEdBQUc7WUFBRXJCLFFBQVE7UUFBSTtJQUM3RTtBQUNGO0FBRUEsb0RBQW9EO0FBQ3BELFNBQVNlO0lBQ1AsT0FBT1MsS0FBS0MsTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsU0FBUyxDQUFDLEdBQUc7QUFDakQ7QUFFTyxNQUFNQyxTQUFTO0lBQ3BCQyxTQUFTO1FBQ1A7Ozs7OztLQU1DLEdBQ0Q7S0FDRDtBQUNILEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL21pZGRsZXdhcmUudHM/ZDE5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgdHlwZSB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgc2hvcGlmeUFwaSwgTEFURVNUX0FQSV9WRVJTSU9OIH0gZnJvbSAnQHNob3BpZnkvc2hvcGlmeS1hcGknO1xuaW1wb3J0ICdAc2hvcGlmeS9zaG9waWZ5LWFwaS9hZGFwdGVycy9ub2RlJztcbmltcG9ydCB7IERlbGl2ZXJ5TWV0aG9kIH0gZnJvbSAnQHNob3BpZnkvc2hvcGlmeS1hcGknO1xuXG4vLyBJbml0aWFsaXplIFNob3BpZnkgQVBJXG5jb25zdCBzaG9waWZ5ID0gc2hvcGlmeUFwaSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuU0hPUElGWV9BUElfS0VZISxcbiAgYXBpU2VjcmV0S2V5OiBwcm9jZXNzLmVudi5TSE9QSUZZX0FQSV9TRUNSRVQhLFxuICBzY29wZXM6IHByb2Nlc3MuZW52LlNIT1BJRllfQVBQX1NDT1BFUz8uc3BsaXQoJywnKSB8fCBbXSxcbiAgaG9zdE5hbWU6IHByb2Nlc3MuZW52LkhPU1QhLFxuICBhcGlWZXJzaW9uOiBMQVRFU1RfQVBJX1ZFUlNJT04sXG4gIGlzRW1iZWRkZWRBcHA6IHRydWUsXG4gIGhvc3RTY2hlbWU6ICdodHRwcycsXG4gIGlzUHJpdmF0ZUFwcDogZmFsc2UsXG4gIHVzZXJBZ2VudFByZWZpeDogJ0J1bmRsclBybycsXG4gIGFkbWluQXBpQWNjZXNzVG9rZW46IHByb2Nlc3MuZW52LlNIT1BJRllfQURNSU5fQUNDRVNTX1RPS0VOLFxuICBiaWxsaW5nOiB1bmRlZmluZWQsXG4gIHdlYmhvb2tzOiB7XG4gICAgQVBQX1VOSU5TVEFMTEVEOiB7XG4gICAgICBkZWxpdmVyeU1ldGhvZDogRGVsaXZlcnlNZXRob2QuSHR0cCxcbiAgICAgIGNhbGxiYWNrVXJsOiAnL2FwaS93ZWJob29rcycsXG4gICAgfSxcbiAgfSxcbn0pO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoKTtcblxuICAgIC8vIEFkZCBDT1JTIGhlYWRlcnMgZm9yIFNob3BpZnlcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHBzOi8vKi5teXNob3BpZnkuY29tJyk7XG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUycpO1xuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ1gtUmVxdWVzdGVkLVdpdGgsIENvbnRlbnQtVHlwZSwgQXV0aG9yaXphdGlvbicpO1xuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsICd0cnVlJyk7XG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0FjY2Vzcy1Db250cm9sLU1heC1BZ2UnLCAnODY0MDAnKTtcblxuICAgIC8vIENvbXByZWhlbnNpdmUgQ1NQIGZvciBTaG9waWZ5IGVtYmVkZGVkIGFwcFxuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdDb250ZW50LVNlY3VyaXR5LVBvbGljeScsIGBcbiAgICAgIGZyYW1lLWFuY2VzdG9ycyBodHRwczovLyoubXlzaG9waWZ5LmNvbSBodHRwczovL2FkbWluLnNob3BpZnkuY29tIGh0dHBzOi8vYWNjb3VudHMuc2hvcGlmeS5jb207XG4gICAgICBkZWZhdWx0LXNyYyAnc2VsZicgaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2FjY291bnRzLnNob3BpZnkuY29tIGh0dHBzOi8vY2RuLnNob3BpZnkuY29tO1xuICAgICAgc2NyaXB0LXNyYyAnc2VsZicgJ3Vuc2FmZS1pbmxpbmUnICd1bnNhZmUtZXZhbCcgaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2Nkbi5zaG9waWZ5LmNvbTtcbiAgICAgIHN0eWxlLXNyYyAnc2VsZicgJ3Vuc2FmZS1pbmxpbmUnIGh0dHBzOi8vKi5teXNob3BpZnkuY29tIGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20gaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb207XG4gICAgICBpbWctc3JjICdzZWxmJyBkYXRhOiBibG9iOiBodHRwczovLyoubXlzaG9waWZ5LmNvbSBodHRwczovL2FkbWluLnNob3BpZnkuY29tIGh0dHBzOi8vY2RuLnNob3BpZnkuY29tO1xuICAgICAgY29ubmVjdC1zcmMgJ3NlbGYnIGh0dHBzOi8vKi5teXNob3BpZnkuY29tIGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20gaHR0cHM6Ly9hY2NvdW50cy5zaG9waWZ5LmNvbSBodHRwczovL2Nkbi5zaG9waWZ5LmNvbSB3c3M6Ly8qLnNob3BpZnkuY29tO1xuICAgICAgZm9udC1zcmMgJ3NlbGYnIGh0dHBzOi8vKi5teXNob3BpZnkuY29tIGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20gaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb207XG4gICAgICBtZWRpYS1zcmMgJ3NlbGYnIGh0dHBzOi8vKi5teXNob3BpZnkuY29tIGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20gaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb207XG4gICAgICBvYmplY3Qtc3JjICdub25lJztcbiAgICAgIGZyYW1lLXNyYyBodHRwczovLyoubXlzaG9waWZ5LmNvbSBodHRwczovL2FkbWluLnNob3BpZnkuY29tIGh0dHBzOi8vYWNjb3VudHMuc2hvcGlmeS5jb207XG4gICAgYC5yZXBsYWNlKC9cXHMrL2csICcgJykudHJpbSgpKTtcblxuICAgIC8vIEhhbmRsZSBPUFRJT05TIHJlcXVlc3RzIGZvciBDT1JTXG4gICAgaWYgKHJlcXVlc3QubWV0aG9kID09PSAnT1BUSU9OUycpIHtcbiAgICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgc3RhdHVzOiAyMDQsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTa2lwIGF1dGggZm9yIEFQSSByb3V0ZXMgYW5kIGF1dGggY2FsbGJhY2tcbiAgICBpZiAocmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9hcGkvJykpIHtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICBjb25zdCBzaG9wID0gcmVxdWVzdC5uZXh0VXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3Nob3AnKTtcbiAgICBjb25zdCBob3N0ID0gcmVxdWVzdC5uZXh0VXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2hvc3QnKTtcbiAgICBjb25zdCBzaG9waWZ5Q29va2llID0gcmVxdWVzdC5jb29raWVzLmdldCgnc2hvcGlmeV9zZXNzaW9uJyk7XG5cbiAgICAvLyBJZiB3ZSBoYXZlIGEgdmFsaWQgc2Vzc2lvbiBjb29raWUsIGFsbG93IHRoZSByZXF1ZXN0XG4gICAgaWYgKHNob3BpZnlDb29raWUpIHtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSdyZSBub3QgaW4gdGhlIFNob3BpZnkgYWRtaW4gY29udGV4dCwgcmVkaXJlY3QgdG8gU2hvcGlmeSBhZG1pblxuICAgIGlmICghc2hvcCB8fCAhaG9zdCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChcbiAgICAgICAgYGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20vc3RvcmUvJHtwcm9jZXNzLmVudi5TSE9QSUZZX0hPU1R9L2FwcHMvYnVuZGxycHJvYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBCZWdpbiBhdXRoIHByb2Nlc3NcbiAgICBjb25zdCByZWRpcmVjdFVyaSA9IGBodHRwczovLyR7cmVxdWVzdC5oZWFkZXJzLmdldCgnaG9zdCcpfS9hcGkvYXV0aC9jYWxsYmFja2A7XG4gICAgY29uc3QgYXV0aFVybCA9IGBodHRwczovLyR7c2hvcH0vYWRtaW4vb2F1dGgvYXV0aG9yaXplP2NsaWVudF9pZD0ke3Byb2Nlc3MuZW52LlNIT1BJRllfQVBJX0tFWX0mc2NvcGU9JHtwcm9jZXNzLmVudi5TSE9QSUZZX0FQUF9TQ09QRVN9JnJlZGlyZWN0X3VyaT0ke2VuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdFVyaSl9JnN0YXRlPSR7Z2VuZXJhdGVOb25jZSgpfWA7XG5cbiAgICBjb25zdCBhdXRoUmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UucmVkaXJlY3QoYXV0aFVybCk7XG4gICAgYXV0aFJlc3BvbnNlLmNvb2tpZXMuc2V0KCdzaG9waWZ5X29hdXRoX3N0YXRlJywgZ2VuZXJhdGVOb25jZSgpLCB7XG4gICAgICBzZWN1cmU6IHRydWUsXG4gICAgICBzYW1lU2l0ZTogJ25vbmUnLFxuICAgICAgcGF0aDogJy8nLFxuICAgICAgaHR0cE9ubHk6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gYXV0aFJlc3BvbnNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ01pZGRsZXdhcmUgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnQXV0aGVudGljYXRpb24gZmFpbGVkJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbi8vIEdlbmVyYXRlIGEgcmFuZG9tIG5vbmNlIGZvciBPQXV0aCBzdGF0ZSBwYXJhbWV0ZXJcbmZ1bmN0aW9uIGdlbmVyYXRlTm9uY2UoKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpO1xufVxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbXG4gICAgLypcbiAgICAgKiBNYXRjaCBhbGwgcGF0aHMgZXhjZXB0IGZvcjpcbiAgICAgKiAxLiAvYXBpIHJvdXRlc1xuICAgICAqIDIuIC9fbmV4dCAoTmV4dC5qcyBpbnRlcm5hbHMpXG4gICAgICogMy4gL3N0YXRpYyAoaW5zaWRlIC9wdWJsaWMpXG4gICAgICogNC4gYWxsIHJvb3QgZmlsZXMgaW5zaWRlIC9wdWJsaWMgKGUuZy4gL2Zhdmljb24uaWNvKVxuICAgICAqL1xuICAgICcvKCg/IWFwaS98X25leHQvfF9zdGF0aWMvfFtcXFxcdy1dK1xcXFwuXFxcXHcrKS4qKScsXG4gIF0sXG59OyAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwic2hvcGlmeUFwaSIsIkxBVEVTVF9BUElfVkVSU0lPTiIsIkRlbGl2ZXJ5TWV0aG9kIiwic2hvcGlmeSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJTSE9QSUZZX0FQSV9LRVkiLCJhcGlTZWNyZXRLZXkiLCJTSE9QSUZZX0FQSV9TRUNSRVQiLCJzY29wZXMiLCJTSE9QSUZZX0FQUF9TQ09QRVMiLCJzcGxpdCIsImhvc3ROYW1lIiwiSE9TVCIsImFwaVZlcnNpb24iLCJpc0VtYmVkZGVkQXBwIiwiaG9zdFNjaGVtZSIsImlzUHJpdmF0ZUFwcCIsInVzZXJBZ2VudFByZWZpeCIsImFkbWluQXBpQWNjZXNzVG9rZW4iLCJTSE9QSUZZX0FETUlOX0FDQ0VTU19UT0tFTiIsImJpbGxpbmciLCJ1bmRlZmluZWQiLCJ3ZWJob29rcyIsIkFQUF9VTklOU1RBTExFRCIsImRlbGl2ZXJ5TWV0aG9kIiwiSHR0cCIsImNhbGxiYWNrVXJsIiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJyZXNwb25zZSIsIm5leHQiLCJoZWFkZXJzIiwic2V0IiwicmVwbGFjZSIsInRyaW0iLCJtZXRob2QiLCJzdGF0dXMiLCJuZXh0VXJsIiwicGF0aG5hbWUiLCJzdGFydHNXaXRoIiwic2hvcCIsInNlYXJjaFBhcmFtcyIsImdldCIsImhvc3QiLCJzaG9waWZ5Q29va2llIiwiY29va2llcyIsInJlZGlyZWN0IiwiU0hPUElGWV9IT1NUIiwicmVkaXJlY3RVcmkiLCJhdXRoVXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZ2VuZXJhdGVOb25jZSIsImF1dGhSZXNwb25zZSIsInNlY3VyZSIsInNhbWVTaXRlIiwicGF0aCIsImh0dHBPbmx5IiwiZXJyb3IiLCJjb25zb2xlIiwianNvbiIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImNvbmZpZyIsIm1hdGNoZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});