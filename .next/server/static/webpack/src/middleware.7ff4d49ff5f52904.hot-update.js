"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(middleware)/./node_modules/next/dist/esm/server/web/exports/next-response.js\");\n/* harmony import */ var _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @shopify/shopify-api */ \"(middleware)/./node_modules/@shopify/shopify-api/lib/index.js\");\n/* harmony import */ var _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _shopify_shopify_api_adapters_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @shopify/shopify-api/adapters/node */ \"(middleware)/./node_modules/@shopify/shopify-api/adapters/node/index.js\");\n\n\n\n\n// Initialize Shopify API\nconst shopify = (0,_shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__.shopifyApi)({\n    apiKey: process.env.SHOPIFY_API_KEY,\n    apiSecretKey: process.env.SHOPIFY_API_SECRET,\n    scopes: process.env.SHOPIFY_APP_SCOPES?.split(\",\") || [],\n    hostName: process.env.HOST,\n    apiVersion: _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__.LATEST_API_VERSION,\n    isEmbeddedApp: true,\n    hostScheme: \"https\",\n    isPrivateApp: false,\n    userAgentPrefix: \"BundlrPro\",\n    adminApiAccessToken: process.env.SHOPIFY_ADMIN_ACCESS_TOKEN,\n    billing: undefined,\n    webhooks: {\n        APP_UNINSTALLED: {\n            deliveryMethod: _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__.DeliveryMethod.Http,\n            callbackUrl: \"/api/webhooks\"\n        }\n    }\n});\nasync function middleware(request) {\n    try {\n        const response = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].next();\n        // Add CORS headers for Shopify\n        response.headers.set(\"Access-Control-Allow-Origin\", \"https://*.myshopify.com\");\n        response.headers.set(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\n        response.headers.set(\"Access-Control-Allow-Headers\", \"X-Requested-With, Content-Type, Authorization\");\n        response.headers.set(\"Access-Control-Allow-Credentials\", \"true\");\n        response.headers.set(\"Access-Control-Max-Age\", \"86400\");\n        // Comprehensive CSP for Shopify embedded app\n        response.headers.set(\"Content-Security-Policy\", `\n      frame-ancestors https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com;\n      default-src 'self' https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com https://cdn.shopify.com;\n      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      style-src 'self' 'unsafe-inline' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      img-src 'self' data: blob: https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      connect-src 'self' https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com https://cdn.shopify.com wss://*.shopify.com;\n      font-src 'self' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      media-src 'self' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      object-src 'none';\n      frame-src https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com;\n    `.replace(/\\s+/g, \" \").trim());\n        // Handle OPTIONS requests for CORS\n        if (request.method === \"OPTIONS\") {\n            return new next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"](null, {\n                status: 204,\n                headers: response.headers\n            });\n        }\n        // Skip auth for API routes and auth callback\n        if (request.nextUrl.pathname.startsWith(\"/api/\")) {\n            return response;\n        }\n        const shop = request.nextUrl.searchParams.get(\"shop\");\n        const host = request.nextUrl.searchParams.get(\"host\");\n        const shopifyCookie = request.cookies.get(\"shopify_session\");\n        // If we have a valid session cookie, allow the request\n        if (shopifyCookie) {\n            return response;\n        }\n        // If we're not in the Shopify admin context, redirect to Shopify admin\n        if (!shop || !host) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(`https://admin.shopify.com/store/blundrpro-development-store.myshopify.com/apps/bundlrpro`);\n        }\n        // Begin auth process\n        const redirectUri = `https://${request.headers.get(\"host\")}/api/auth/callback`;\n        const authUrl = `https://${shop}/admin/oauth/authorize?client_id=${process.env.SHOPIFY_API_KEY}&scope=${process.env.SHOPIFY_APP_SCOPES}&redirect_uri=${encodeURIComponent(redirectUri)}&state=${generateNonce()}`;\n        const authResponse = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(authUrl);\n        authResponse.cookies.set(\"shopify_oauth_state\", generateNonce(), {\n            secure: true,\n            sameSite: \"none\",\n            path: \"/\",\n            httpOnly: true\n        });\n        return authResponse;\n    } catch (error) {\n        console.error(\"Middleware error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Authentication failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Generate a random nonce for OAuth state parameter\nfunction generateNonce() {\n    return Math.random().toString(36).substring(2, 15);\n}\nconst config = {\n    matcher: [\n        /*\n     * Match all paths except for:\n     * 1. /api routes\n     * 2. /_next (Next.js internals)\n     * 3. /static (inside /public)\n     * 4. all root files inside /public (e.g. /favicon.ico)\n     */ \"/((?!api/|_next/|_static/|[\\\\w-]+\\\\.\\\\w+).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJDO0FBRTJCO0FBQzFCO0FBQ1U7QUFFdEQseUJBQXlCO0FBQ3pCLE1BQU1JLFVBQVVILGdFQUFVQSxDQUFDO0lBQ3pCSSxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGVBQWU7SUFDbkNDLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ0csa0JBQWtCO0lBQzVDQyxRQUFRTCxRQUFRQyxHQUFHLENBQUNLLGtCQUFrQixFQUFFQyxNQUFNLFFBQVEsRUFBRTtJQUN4REMsVUFBVVIsUUFBUUMsR0FBRyxDQUFDUSxJQUFJO0lBQzFCQyxZQUFZZCxvRUFBa0JBO0lBQzlCZSxlQUFlO0lBQ2ZDLFlBQVk7SUFDWkMsY0FBYztJQUNkQyxpQkFBaUI7SUFDakJDLHFCQUFxQmYsUUFBUUMsR0FBRyxDQUFDZSwwQkFBMEI7SUFDM0RDLFNBQVNDO0lBQ1RDLFVBQVU7UUFDUkMsaUJBQWlCO1lBQ2ZDLGdCQUFnQnhCLGdFQUFjQSxDQUFDeUIsSUFBSTtZQUNuQ0MsYUFBYTtRQUNmO0lBQ0Y7QUFDRjtBQUVPLGVBQWVDLFdBQVdDLE9BQW9CO0lBQ25ELElBQUk7UUFDRixNQUFNQyxXQUFXaEMsdUZBQWlCO1FBRWxDLCtCQUErQjtRQUMvQmdDLFNBQVNFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLCtCQUErQjtRQUNwREgsU0FBU0UsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0NBQWdDO1FBQ3JESCxTQUFTRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQ0FBZ0M7UUFDckRILFNBQVNFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG9DQUFvQztRQUN6REgsU0FBU0UsT0FBTyxDQUFDQyxHQUFHLENBQUMsMEJBQTBCO1FBRS9DLDZDQUE2QztRQUM3Q0gsU0FBU0UsT0FBTyxDQUFDQyxHQUFHLENBQUMsMkJBQTJCLENBQUM7Ozs7Ozs7Ozs7O0lBV2pELENBQUMsQ0FBQ0MsT0FBTyxDQUFDLFFBQVEsS0FBS0MsSUFBSTtRQUUzQixtQ0FBbUM7UUFDbkMsSUFBSU4sUUFBUU8sTUFBTSxLQUFLLFdBQVc7WUFDaEMsT0FBTyxJQUFJdEMsa0ZBQVlBLENBQUMsTUFBTTtnQkFDNUJ1QyxRQUFRO2dCQUNSTCxTQUFTRixTQUFTRSxPQUFPO1lBQzNCO1FBQ0Y7UUFFQSw2Q0FBNkM7UUFDN0MsSUFBSUgsUUFBUVMsT0FBTyxDQUFDQyxRQUFRLENBQUNDLFVBQVUsQ0FBQyxVQUFVO1lBQ2hELE9BQU9WO1FBQ1Q7UUFFQSxNQUFNVyxPQUFPWixRQUFRUyxPQUFPLENBQUNJLFlBQVksQ0FBQ0MsR0FBRyxDQUFDO1FBQzlDLE1BQU1DLE9BQU9mLFFBQVFTLE9BQU8sQ0FBQ0ksWUFBWSxDQUFDQyxHQUFHLENBQUM7UUFDOUMsTUFBTUUsZ0JBQWdCaEIsUUFBUWlCLE9BQU8sQ0FBQ0gsR0FBRyxDQUFDO1FBRTFDLHVEQUF1RDtRQUN2RCxJQUFJRSxlQUFlO1lBQ2pCLE9BQU9mO1FBQ1Q7UUFFQSx1RUFBdUU7UUFDdkUsSUFBSSxDQUFDVyxRQUFRLENBQUNHLE1BQU07WUFDbEIsT0FBTzlDLDJGQUFxQixDQUMxQixDQUFDLHdGQUF3RixDQUFDO1FBRTlGO1FBRUEscUJBQXFCO1FBQ3JCLE1BQU1rRCxjQUFjLENBQUMsUUFBUSxFQUFFbkIsUUFBUUcsT0FBTyxDQUFDVyxHQUFHLENBQUMsUUFBUSxrQkFBa0IsQ0FBQztRQUM5RSxNQUFNTSxVQUFVLENBQUMsUUFBUSxFQUFFUixLQUFLLGlDQUFpQyxFQUFFckMsUUFBUUMsR0FBRyxDQUFDQyxlQUFlLENBQUMsT0FBTyxFQUFFRixRQUFRQyxHQUFHLENBQUNLLGtCQUFrQixDQUFDLGNBQWMsRUFBRXdDLG1CQUFtQkYsYUFBYSxPQUFPLEVBQUVHLGdCQUFnQixDQUFDO1FBRWpOLE1BQU1DLGVBQWV0RCwyRkFBcUIsQ0FBQ21EO1FBQzNDRyxhQUFhTixPQUFPLENBQUNiLEdBQUcsQ0FBQyx1QkFBdUJrQixpQkFBaUI7WUFDL0RFLFFBQVE7WUFDUkMsVUFBVTtZQUNWQyxNQUFNO1lBQ05DLFVBQVU7UUFDWjtRQUNBLE9BQU9KO0lBQ1QsRUFBRSxPQUFPSyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxxQkFBcUJBO1FBQ25DLE9BQU8zRCx1RkFBaUIsQ0FBQztZQUFFMkQsT0FBTztRQUF3QixHQUFHO1lBQUVwQixRQUFRO1FBQUk7SUFDN0U7QUFDRjtBQUVBLG9EQUFvRDtBQUNwRCxTQUFTYztJQUNQLE9BQU9TLEtBQUtDLE1BQU0sR0FBR0MsUUFBUSxDQUFDLElBQUlDLFNBQVMsQ0FBQyxHQUFHO0FBQ2pEO0FBRU8sTUFBTUMsU0FBUztJQUNwQkMsU0FBUztRQUNQOzs7Ozs7S0FNQyxHQUNEO0tBQ0Q7QUFDSCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9taWRkbGV3YXJlLnRzP2QxOTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHR5cGUgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHNob3BpZnlBcGksIExBVEVTVF9BUElfVkVSU0lPTiB9IGZyb20gJ0BzaG9waWZ5L3Nob3BpZnktYXBpJztcbmltcG9ydCAnQHNob3BpZnkvc2hvcGlmeS1hcGkvYWRhcHRlcnMvbm9kZSc7XG5pbXBvcnQgeyBEZWxpdmVyeU1ldGhvZCB9IGZyb20gJ0BzaG9waWZ5L3Nob3BpZnktYXBpJztcblxuLy8gSW5pdGlhbGl6ZSBTaG9waWZ5IEFQSVxuY29uc3Qgc2hvcGlmeSA9IHNob3BpZnlBcGkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52LlNIT1BJRllfQVBJX0tFWSEsXG4gIGFwaVNlY3JldEtleTogcHJvY2Vzcy5lbnYuU0hPUElGWV9BUElfU0VDUkVUISxcbiAgc2NvcGVzOiBwcm9jZXNzLmVudi5TSE9QSUZZX0FQUF9TQ09QRVM/LnNwbGl0KCcsJykgfHwgW10sXG4gIGhvc3ROYW1lOiBwcm9jZXNzLmVudi5IT1NUISxcbiAgYXBpVmVyc2lvbjogTEFURVNUX0FQSV9WRVJTSU9OLFxuICBpc0VtYmVkZGVkQXBwOiB0cnVlLFxuICBob3N0U2NoZW1lOiAnaHR0cHMnLFxuICBpc1ByaXZhdGVBcHA6IGZhbHNlLFxuICB1c2VyQWdlbnRQcmVmaXg6ICdCdW5kbHJQcm8nLFxuICBhZG1pbkFwaUFjY2Vzc1Rva2VuOiBwcm9jZXNzLmVudi5TSE9QSUZZX0FETUlOX0FDQ0VTU19UT0tFTixcbiAgYmlsbGluZzogdW5kZWZpbmVkLFxuICB3ZWJob29rczoge1xuICAgIEFQUF9VTklOU1RBTExFRDoge1xuICAgICAgZGVsaXZlcnlNZXRob2Q6IERlbGl2ZXJ5TWV0aG9kLkh0dHAsXG4gICAgICBjYWxsYmFja1VybDogJy9hcGkvd2ViaG9va3MnLFxuICAgIH0sXG4gIH0sXG59KTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5uZXh0KCk7XG5cbiAgICAvLyBBZGQgQ09SUyBoZWFkZXJzIGZvciBTaG9waWZ5XG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwczovLyoubXlzaG9waWZ5LmNvbScpO1xuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKTtcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEF1dGhvcml6YXRpb24nKTtcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdBY2Nlc3MtQ29udHJvbC1NYXgtQWdlJywgJzg2NDAwJyk7XG5cbiAgICAvLyBDb21wcmVoZW5zaXZlIENTUCBmb3IgU2hvcGlmeSBlbWJlZGRlZCBhcHBcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnQ29udGVudC1TZWN1cml0eS1Qb2xpY3knLCBgXG4gICAgICBmcmFtZS1hbmNlc3RvcnMgaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2FjY291bnRzLnNob3BpZnkuY29tO1xuICAgICAgZGVmYXVsdC1zcmMgJ3NlbGYnIGh0dHBzOi8vKi5teXNob3BpZnkuY29tIGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20gaHR0cHM6Ly9hY2NvdW50cy5zaG9waWZ5LmNvbSBodHRwczovL2Nkbi5zaG9waWZ5LmNvbTtcbiAgICAgIHNjcmlwdC1zcmMgJ3NlbGYnICd1bnNhZmUtaW5saW5lJyAndW5zYWZlLWV2YWwnIGh0dHBzOi8vKi5teXNob3BpZnkuY29tIGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20gaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb207XG4gICAgICBzdHlsZS1zcmMgJ3NlbGYnICd1bnNhZmUtaW5saW5lJyBodHRwczovLyoubXlzaG9waWZ5LmNvbSBodHRwczovL2FkbWluLnNob3BpZnkuY29tIGh0dHBzOi8vY2RuLnNob3BpZnkuY29tO1xuICAgICAgaW1nLXNyYyAnc2VsZicgZGF0YTogYmxvYjogaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2Nkbi5zaG9waWZ5LmNvbTtcbiAgICAgIGNvbm5lY3Qtc3JjICdzZWxmJyBodHRwczovLyoubXlzaG9waWZ5LmNvbSBodHRwczovL2FkbWluLnNob3BpZnkuY29tIGh0dHBzOi8vYWNjb3VudHMuc2hvcGlmeS5jb20gaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb20gd3NzOi8vKi5zaG9waWZ5LmNvbTtcbiAgICAgIGZvbnQtc3JjICdzZWxmJyBodHRwczovLyoubXlzaG9waWZ5LmNvbSBodHRwczovL2FkbWluLnNob3BpZnkuY29tIGh0dHBzOi8vY2RuLnNob3BpZnkuY29tO1xuICAgICAgbWVkaWEtc3JjICdzZWxmJyBodHRwczovLyoubXlzaG9waWZ5LmNvbSBodHRwczovL2FkbWluLnNob3BpZnkuY29tIGh0dHBzOi8vY2RuLnNob3BpZnkuY29tO1xuICAgICAgb2JqZWN0LXNyYyAnbm9uZSc7XG4gICAgICBmcmFtZS1zcmMgaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2FjY291bnRzLnNob3BpZnkuY29tO1xuICAgIGAucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKSk7XG5cbiAgICAvLyBIYW5kbGUgT1BUSU9OUyByZXF1ZXN0cyBmb3IgQ09SU1xuICAgIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XG4gICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShudWxsLCB7XG4gICAgICAgIHN0YXR1czogMjA0LFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2tpcCBhdXRoIGZvciBBUEkgcm91dGVzIGFuZCBhdXRoIGNhbGxiYWNrXG4gICAgaWYgKHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvYXBpLycpKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgc2hvcCA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXMuZ2V0KCdzaG9wJyk7XG4gICAgY29uc3QgaG9zdCA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXMuZ2V0KCdob3N0Jyk7XG4gICAgY29uc3Qgc2hvcGlmeUNvb2tpZSA9IHJlcXVlc3QuY29va2llcy5nZXQoJ3Nob3BpZnlfc2Vzc2lvbicpO1xuXG4gICAgLy8gSWYgd2UgaGF2ZSBhIHZhbGlkIHNlc3Npb24gY29va2llLCBhbGxvdyB0aGUgcmVxdWVzdFxuICAgIGlmIChzaG9waWZ5Q29va2llKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UncmUgbm90IGluIHRoZSBTaG9waWZ5IGFkbWluIGNvbnRleHQsIHJlZGlyZWN0IHRvIFNob3BpZnkgYWRtaW5cbiAgICBpZiAoIXNob3AgfHwgIWhvc3QpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QoXG4gICAgICAgIGBodHRwczovL2FkbWluLnNob3BpZnkuY29tL3N0b3JlL2JsdW5kcnByby1kZXZlbG9wbWVudC1zdG9yZS5teXNob3BpZnkuY29tL2FwcHMvYnVuZGxycHJvYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBCZWdpbiBhdXRoIHByb2Nlc3NcbiAgICBjb25zdCByZWRpcmVjdFVyaSA9IGBodHRwczovLyR7cmVxdWVzdC5oZWFkZXJzLmdldCgnaG9zdCcpfS9hcGkvYXV0aC9jYWxsYmFja2A7XG4gICAgY29uc3QgYXV0aFVybCA9IGBodHRwczovLyR7c2hvcH0vYWRtaW4vb2F1dGgvYXV0aG9yaXplP2NsaWVudF9pZD0ke3Byb2Nlc3MuZW52LlNIT1BJRllfQVBJX0tFWX0mc2NvcGU9JHtwcm9jZXNzLmVudi5TSE9QSUZZX0FQUF9TQ09QRVN9JnJlZGlyZWN0X3VyaT0ke2VuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdFVyaSl9JnN0YXRlPSR7Z2VuZXJhdGVOb25jZSgpfWA7XG5cbiAgICBjb25zdCBhdXRoUmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UucmVkaXJlY3QoYXV0aFVybCk7XG4gICAgYXV0aFJlc3BvbnNlLmNvb2tpZXMuc2V0KCdzaG9waWZ5X29hdXRoX3N0YXRlJywgZ2VuZXJhdGVOb25jZSgpLCB7XG4gICAgICBzZWN1cmU6IHRydWUsXG4gICAgICBzYW1lU2l0ZTogJ25vbmUnLFxuICAgICAgcGF0aDogJy8nLFxuICAgICAgaHR0cE9ubHk6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gYXV0aFJlc3BvbnNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ01pZGRsZXdhcmUgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnQXV0aGVudGljYXRpb24gZmFpbGVkJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbi8vIEdlbmVyYXRlIGEgcmFuZG9tIG5vbmNlIGZvciBPQXV0aCBzdGF0ZSBwYXJhbWV0ZXJcbmZ1bmN0aW9uIGdlbmVyYXRlTm9uY2UoKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpO1xufVxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbXG4gICAgLypcbiAgICAgKiBNYXRjaCBhbGwgcGF0aHMgZXhjZXB0IGZvcjpcbiAgICAgKiAxLiAvYXBpIHJvdXRlc1xuICAgICAqIDIuIC9fbmV4dCAoTmV4dC5qcyBpbnRlcm5hbHMpXG4gICAgICogMy4gL3N0YXRpYyAoaW5zaWRlIC9wdWJsaWMpXG4gICAgICogNC4gYWxsIHJvb3QgZmlsZXMgaW5zaWRlIC9wdWJsaWMgKGUuZy4gL2Zhdmljb24uaWNvKVxuICAgICAqL1xuICAgICcvKCg/IWFwaS98X25leHQvfF9zdGF0aWMvfFtcXFxcdy1dK1xcXFwuXFxcXHcrKS4qKScsXG4gIF0sXG59OyAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwic2hvcGlmeUFwaSIsIkxBVEVTVF9BUElfVkVSU0lPTiIsIkRlbGl2ZXJ5TWV0aG9kIiwic2hvcGlmeSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJTSE9QSUZZX0FQSV9LRVkiLCJhcGlTZWNyZXRLZXkiLCJTSE9QSUZZX0FQSV9TRUNSRVQiLCJzY29wZXMiLCJTSE9QSUZZX0FQUF9TQ09QRVMiLCJzcGxpdCIsImhvc3ROYW1lIiwiSE9TVCIsImFwaVZlcnNpb24iLCJpc0VtYmVkZGVkQXBwIiwiaG9zdFNjaGVtZSIsImlzUHJpdmF0ZUFwcCIsInVzZXJBZ2VudFByZWZpeCIsImFkbWluQXBpQWNjZXNzVG9rZW4iLCJTSE9QSUZZX0FETUlOX0FDQ0VTU19UT0tFTiIsImJpbGxpbmciLCJ1bmRlZmluZWQiLCJ3ZWJob29rcyIsIkFQUF9VTklOU1RBTExFRCIsImRlbGl2ZXJ5TWV0aG9kIiwiSHR0cCIsImNhbGxiYWNrVXJsIiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJyZXNwb25zZSIsIm5leHQiLCJoZWFkZXJzIiwic2V0IiwicmVwbGFjZSIsInRyaW0iLCJtZXRob2QiLCJzdGF0dXMiLCJuZXh0VXJsIiwicGF0aG5hbWUiLCJzdGFydHNXaXRoIiwic2hvcCIsInNlYXJjaFBhcmFtcyIsImdldCIsImhvc3QiLCJzaG9waWZ5Q29va2llIiwiY29va2llcyIsInJlZGlyZWN0IiwicmVkaXJlY3RVcmkiLCJhdXRoVXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZ2VuZXJhdGVOb25jZSIsImF1dGhSZXNwb25zZSIsInNlY3VyZSIsInNhbWVTaXRlIiwicGF0aCIsImh0dHBPbmx5IiwiZXJyb3IiLCJjb25zb2xlIiwianNvbiIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImNvbmZpZyIsIm1hdGNoZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});