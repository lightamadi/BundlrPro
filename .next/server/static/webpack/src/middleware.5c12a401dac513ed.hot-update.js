"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(middleware)/./node_modules/next/dist/esm/server/web/exports/next-response.js\");\n/* harmony import */ var _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @shopify/shopify-api */ \"(middleware)/./node_modules/@shopify/shopify-api/lib/index.js\");\n/* harmony import */ var _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _shopify_shopify_api_adapters_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @shopify/shopify-api/adapters/node */ \"(middleware)/./node_modules/@shopify/shopify-api/adapters/node/index.js\");\n\n\n\n\n// Initialize Shopify API\nconst shopify = (0,_shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__.shopifyApi)({\n    apiKey: process.env.SHOPIFY_API_KEY,\n    apiSecretKey: process.env.SHOPIFY_API_SECRET,\n    scopes: process.env.SHOPIFY_APP_SCOPES?.split(\",\") || [],\n    hostName: process.env.HOST,\n    apiVersion: _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__.LATEST_API_VERSION,\n    isEmbeddedApp: true,\n    hostScheme: \"https\",\n    isPrivateApp: false,\n    userAgentPrefix: \"BundlrPro\",\n    adminApiAccessToken: process.env.SHOPIFY_ADMIN_ACCESS_TOKEN,\n    billing: undefined,\n    webhooks: {\n        APP_UNINSTALLED: {\n            deliveryMethod: _shopify_shopify_api__WEBPACK_IMPORTED_MODULE_1__.DeliveryMethod.Http,\n            callbackUrl: \"/api/webhooks\"\n        }\n    }\n});\nasync function middleware(request) {\n    try {\n        const response = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].next();\n        // Add CORS headers for Shopify\n        response.headers.set(\"Access-Control-Allow-Origin\", \"https://*.myshopify.com\");\n        response.headers.set(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\n        response.headers.set(\"Access-Control-Allow-Headers\", \"X-Requested-With, Content-Type, Authorization\");\n        response.headers.set(\"Access-Control-Allow-Credentials\", \"true\");\n        response.headers.set(\"Access-Control-Max-Age\", \"86400\");\n        // Comprehensive CSP for Shopify embedded app\n        response.headers.set(\"Content-Security-Policy\", `\n      frame-ancestors https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com;\n      default-src 'self' https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com https://cdn.shopify.com;\n      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      style-src 'self' 'unsafe-inline' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      img-src 'self' data: blob: https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      connect-src 'self' https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com https://cdn.shopify.com wss://*.shopify.com;\n      font-src 'self' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      media-src 'self' https://*.myshopify.com https://admin.shopify.com https://cdn.shopify.com;\n      object-src 'none';\n      frame-src https://*.myshopify.com https://admin.shopify.com https://accounts.shopify.com;\n    `.replace(/\\s+/g, \" \").trim());\n        // Handle OPTIONS requests for CORS\n        if (request.method === \"OPTIONS\") {\n            return new next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"](null, {\n                status: 204,\n                headers: response.headers\n            });\n        }\n        // Skip auth for API routes and auth callback\n        if (request.nextUrl.pathname.startsWith(\"/api/\")) {\n            return response;\n        }\n        const shop = request.nextUrl.searchParams.get(\"shop\");\n        const host = request.nextUrl.searchParams.get(\"host\");\n        const shopifyCookie = request.cookies.get(\"shopify_session\");\n        // If we have a valid session cookie, allow the request\n        if (shopifyCookie) {\n            return response;\n        }\n        // If we're not in the Shopify admin context, redirect to Shopify admin\n        if (!shop || !host) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(`https://admin.shopify.com/store/${process.env.SHOPIFY_HOST}/apps/bundlrpro-dev`);\n        }\n        // Begin auth process\n        const redirectUri = `https://${request.headers.get(\"host\")}/api/auth/callback`;\n        const authUrl = `https://${shop}/admin/oauth/authorize?client_id=${process.env.SHOPIFY_API_KEY}&scope=${process.env.SHOPIFY_APP_SCOPES}&redirect_uri=${encodeURIComponent(redirectUri)}&state=${generateNonce()}`;\n        const authResponse = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(authUrl);\n        authResponse.cookies.set(\"shopify_oauth_state\", generateNonce(), {\n            secure: true,\n            sameSite: \"none\",\n            path: \"/\",\n            httpOnly: true\n        });\n        return authResponse;\n    } catch (error) {\n        console.error(\"Middleware error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Authentication failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Generate a random nonce for OAuth state parameter\nfunction generateNonce() {\n    return Math.random().toString(36).substring(2, 15);\n}\nconst config = {\n    matcher: [\n        /*\n     * Match all paths except for:\n     * 1. /api routes\n     * 2. /_next (Next.js internals)\n     * 3. /static (inside /public)\n     * 4. all root files inside /public (e.g. /favicon.ico)\n     */ \"/((?!api/|_next/|_static/|[\\\\w-]+\\\\.\\\\w+).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qy9ERSxRQUFRO1lBQ1JDLFVBQVU7WUFDVkMsTUFBTTtZQUNOQyxVQUFVO1FBQ1o7UUFDQSxPQUFPSjtJQUNULEVBQUUsT0FBT0ssT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMscUJBQXFCQTtRQUNuQyxPQUFPNUQsdUZBQWlCLENBQUM7WUFBRTRELE9BQU87UUFBd0IsR0FBRztZQUFFckIsUUFBUTtRQUFJO0lBQzdFO0FBQ0Y7QUFFQSxvREFBb0Q7QUFDcEQsU0FBU2U7SUFDUCxPQUFPUyxLQUFLQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQyxJQUFJQyxTQUFTLENBQUMsR0FBRztBQUNqRDtBQUVPLE1BQU1DLFNBQVM7SUFDcEJDLFNBQVM7UUFDUDs7Ozs7O0tBTUMsR0FDRDtLQUNEO0FBQ0gsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbWlkZGxld2FyZS50cz9kMTk5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB0eXBlIHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBzaG9waWZ5QXBpLCBMQVRFU1RfQVBJX1ZFUlNJT04gfSBmcm9tICdAc2hvcGlmeS9zaG9waWZ5LWFwaSc7XG5pbXBvcnQgJ0BzaG9waWZ5L3Nob3BpZnktYXBpL2FkYXB0ZXJzL25vZGUnO1xuaW1wb3J0IHsgRGVsaXZlcnlNZXRob2QgfSBmcm9tICdAc2hvcGlmeS9zaG9waWZ5LWFwaSc7XG5cbi8vIEluaXRpYWxpemUgU2hvcGlmeSBBUElcbmNvbnN0IHNob3BpZnkgPSBzaG9waWZ5QXBpKHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5TSE9QSUZZX0FQSV9LRVkhLFxuICBhcGlTZWNyZXRLZXk6IHByb2Nlc3MuZW52LlNIT1BJRllfQVBJX1NFQ1JFVCEsXG4gIHNjb3BlczogcHJvY2Vzcy5lbnYuU0hPUElGWV9BUFBfU0NPUEVTPy5zcGxpdCgnLCcpIHx8IFtdLFxuICBob3N0TmFtZTogcHJvY2Vzcy5lbnYuSE9TVCEsXG4gIGFwaVZlcnNpb246IExBVEVTVF9BUElfVkVSU0lPTixcbiAgaXNFbWJlZGRlZEFwcDogdHJ1ZSxcbiAgaG9zdFNjaGVtZTogJ2h0dHBzJyxcbiAgaXNQcml2YXRlQXBwOiBmYWxzZSxcbiAgdXNlckFnZW50UHJlZml4OiAnQnVuZGxyUHJvJyxcbiAgYWRtaW5BcGlBY2Nlc3NUb2tlbjogcHJvY2Vzcy5lbnYuU0hPUElGWV9BRE1JTl9BQ0NFU1NfVE9LRU4sXG4gIGJpbGxpbmc6IHVuZGVmaW5lZCxcbiAgd2ViaG9va3M6IHtcbiAgICBBUFBfVU5JTlNUQUxMRUQ6IHtcbiAgICAgIGRlbGl2ZXJ5TWV0aG9kOiBEZWxpdmVyeU1ldGhvZC5IdHRwLFxuICAgICAgY2FsbGJhY2tVcmw6ICcvYXBpL3dlYmhvb2tzJyxcbiAgICB9LFxuICB9LFxufSk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCgpO1xuXG4gICAgLy8gQWRkIENPUlMgaGVhZGVycyBmb3IgU2hvcGlmeVxuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20nKTtcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBPUFRJT05TJyk7XG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uJyk7XG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnQWNjZXNzLUNvbnRyb2wtTWF4LUFnZScsICc4NjQwMCcpO1xuXG4gICAgLy8gQ29tcHJlaGVuc2l2ZSBDU1AgZm9yIFNob3BpZnkgZW1iZWRkZWQgYXBwXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0NvbnRlbnQtU2VjdXJpdHktUG9saWN5JywgYFxuICAgICAgZnJhbWUtYW5jZXN0b3JzIGh0dHBzOi8vKi5teXNob3BpZnkuY29tIGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20gaHR0cHM6Ly9hY2NvdW50cy5zaG9waWZ5LmNvbTtcbiAgICAgIGRlZmF1bHQtc3JjICdzZWxmJyBodHRwczovLyoubXlzaG9waWZ5LmNvbSBodHRwczovL2FkbWluLnNob3BpZnkuY29tIGh0dHBzOi8vYWNjb3VudHMuc2hvcGlmeS5jb20gaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb207XG4gICAgICBzY3JpcHQtc3JjICdzZWxmJyAndW5zYWZlLWlubGluZScgJ3Vuc2FmZS1ldmFsJyBodHRwczovLyoubXlzaG9waWZ5LmNvbSBodHRwczovL2FkbWluLnNob3BpZnkuY29tIGh0dHBzOi8vY2RuLnNob3BpZnkuY29tO1xuICAgICAgc3R5bGUtc3JjICdzZWxmJyAndW5zYWZlLWlubGluZScgaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2Nkbi5zaG9waWZ5LmNvbTtcbiAgICAgIGltZy1zcmMgJ3NlbGYnIGRhdGE6IGJsb2I6IGh0dHBzOi8vKi5teXNob3BpZnkuY29tIGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20gaHR0cHM6Ly9jZG4uc2hvcGlmeS5jb207XG4gICAgICBjb25uZWN0LXNyYyAnc2VsZicgaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2FjY291bnRzLnNob3BpZnkuY29tIGh0dHBzOi8vY2RuLnNob3BpZnkuY29tIHdzczovLyouc2hvcGlmeS5jb207XG4gICAgICBmb250LXNyYyAnc2VsZicgaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2Nkbi5zaG9waWZ5LmNvbTtcbiAgICAgIG1lZGlhLXNyYyAnc2VsZicgaHR0cHM6Ly8qLm15c2hvcGlmeS5jb20gaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbSBodHRwczovL2Nkbi5zaG9waWZ5LmNvbTtcbiAgICAgIG9iamVjdC1zcmMgJ25vbmUnO1xuICAgICAgZnJhbWUtc3JjIGh0dHBzOi8vKi5teXNob3BpZnkuY29tIGh0dHBzOi8vYWRtaW4uc2hvcGlmeS5jb20gaHR0cHM6Ly9hY2NvdW50cy5zaG9waWZ5LmNvbTtcbiAgICBgLnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCkpO1xuXG4gICAgLy8gSGFuZGxlIE9QVElPTlMgcmVxdWVzdHMgZm9yIENPUlNcbiAgICBpZiAocmVxdWVzdC5tZXRob2QgPT09ICdPUFRJT05TJykge1xuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UobnVsbCwge1xuICAgICAgICBzdGF0dXM6IDIwNCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNraXAgYXV0aCBmb3IgQVBJIHJvdXRlcyBhbmQgYXV0aCBjYWxsYmFja1xuICAgIGlmIChyZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnL2FwaS8nKSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cblxuICAgIGNvbnN0IHNob3AgPSByZXF1ZXN0Lm5leHRVcmwuc2VhcmNoUGFyYW1zLmdldCgnc2hvcCcpO1xuICAgIGNvbnN0IGhvc3QgPSByZXF1ZXN0Lm5leHRVcmwuc2VhcmNoUGFyYW1zLmdldCgnaG9zdCcpO1xuICAgIGNvbnN0IHNob3BpZnlDb29raWUgPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCdzaG9waWZ5X3Nlc3Npb24nKTtcblxuICAgIC8vIElmIHdlIGhhdmUgYSB2YWxpZCBzZXNzaW9uIGNvb2tpZSwgYWxsb3cgdGhlIHJlcXVlc3RcbiAgICBpZiAoc2hvcGlmeUNvb2tpZSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cblxuICAgIC8vIElmIHdlJ3JlIG5vdCBpbiB0aGUgU2hvcGlmeSBhZG1pbiBjb250ZXh0LCByZWRpcmVjdCB0byBTaG9waWZ5IGFkbWluXG4gICAgaWYgKCFzaG9wIHx8ICFob3N0KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KFxuICAgICAgICBgaHR0cHM6Ly9hZG1pbi5zaG9waWZ5LmNvbS9zdG9yZS8ke3Byb2Nlc3MuZW52LlNIT1BJRllfSE9TVH0vYXBwcy9idW5kbHJwcm8tZGV2YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBCZWdpbiBhdXRoIHByb2Nlc3NcbiAgICBjb25zdCByZWRpcmVjdFVyaSA9IGBodHRwczovLyR7cmVxdWVzdC5oZWFkZXJzLmdldCgnaG9zdCcpfS9hcGkvYXV0aC9jYWxsYmFja2A7XG4gICAgY29uc3QgYXV0aFVybCA9IGBodHRwczovLyR7c2hvcH0vYWRtaW4vb2F1dGgvYXV0aG9yaXplP2NsaWVudF9pZD0ke3Byb2Nlc3MuZW52LlNIT1BJRllfQVBJX0tFWX0mc2NvcGU9JHtwcm9jZXNzLmVudi5TSE9QSUZZX0FQUF9TQ09QRVN9JnJlZGlyZWN0X3VyaT0ke2VuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdFVyaSl9JnN0YXRlPSR7Z2VuZXJhdGVOb25jZSgpfWA7XG5cbiAgICBjb25zdCBhdXRoUmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UucmVkaXJlY3QoYXV0aFVybCk7XG4gICAgYXV0aFJlc3BvbnNlLmNvb2tpZXMuc2V0KCdzaG9waWZ5X29hdXRoX3N0YXRlJywgZ2VuZXJhdGVOb25jZSgpLCB7XG4gICAgICBzZWN1cmU6IHRydWUsXG4gICAgICBzYW1lU2l0ZTogJ25vbmUnLFxuICAgICAgcGF0aDogJy8nLFxuICAgICAgaHR0cE9ubHk6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gYXV0aFJlc3BvbnNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ01pZGRsZXdhcmUgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnQXV0aGVudGljYXRpb24gZmFpbGVkJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbi8vIEdlbmVyYXRlIGEgcmFuZG9tIG5vbmNlIGZvciBPQXV0aCBzdGF0ZSBwYXJhbWV0ZXJcbmZ1bmN0aW9uIGdlbmVyYXRlTm9uY2UoKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpO1xufVxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbXG4gICAgLypcbiAgICAgKiBNYXRjaCBhbGwgcGF0aHMgZXhjZXB0IGZvcjpcbiAgICAgKiAxLiAvYXBpIHJvdXRlc1xuICAgICAqIDIuIC9fbmV4dCAoTmV4dC5qcyBpbnRlcm5hbHMpXG4gICAgICogMy4gL3N0YXRpYyAoaW5zaWRlIC9wdWJsaWMpXG4gICAgICogNC4gYWxsIHJvb3QgZmlsZXMgaW5zaWRlIC9wdWJsaWMgKGUuZy4gL2Zhdmljb24uaWNvKVxuICAgICAqL1xuICAgICcvKCg/IWFwaS98X25leHQvfF9zdGF0aWMvfFtcXFxcdy1dK1xcXFwuXFxcXHcrKS4qKScsXG4gIF0sXG59OyAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwic2hvcGlmeUFwaSIsIkxBVEVTVF9BUElfVkVSU0lPTiIsIkRlbGl2ZXJ5TWV0aG9kIiwic2hvcGlmeSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJTSE9QSUZZX0FQSV9LRVkiLCJhcGlTZWNyZXRLZXkiLCJTSE9QSUZZX0FQSV9TRUNSRVQiLCJzY29wZXMiLCJTSE9QSUZZX0FQUF9TQ09QRVMiLCJzcGxpdCIsImhvc3ROYW1lIiwiSE9TVCIsImFwaVZlcnNpb24iLCJpc0VtYmVkZGVkQXBwIiwiaG9zdFNjaGVtZSIsImlzUHJpdmF0ZUFwcCIsInVzZXJBZ2VudFByZWZpeCIsImFkbWluQXBpQWNjZXNzVG9rZW4iLCJTSE9QSUZZX0FETUlOX0FDQ0VTU19UT0tFTiIsImJpbGxpbmciLCJ1bmRlZmluZWQiLCJ3ZWJob29rcyIsIkFQUF9VTklOU1RBTExFRCIsImRlbGl2ZXJ5TWV0aG9kIiwiSHR0cCIsImNhbGxiYWNrVXJsIiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJyZXNwb25zZSIsIm5leHQiLCJoZWFkZXJzIiwic2V0IiwicmVwbGFjZSIsInRyaW0iLCJtZXRob2QiLCJzdGF0dXMiLCJuZXh0VXJsIiwicGF0aG5hbWUiLCJzdGFydHNXaXRoIiwic2hvcCIsInNlYXJjaFBhcmFtcyIsImdldCIsImhvc3QiLCJzaG9waWZ5Q29va2llIiwiY29va2llcyIsInJlZGlyZWN0IiwiU0hPUElGWV9IT1NUIiwicmVkaXJlY3RVcmkiLCJhdXRoVXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZ2VuZXJhdGVOb25jZSIsImF1dGhSZXNwb25zZSIsInNlY3VyZSIsInNhbWVTaXRlIiwicGF0aCIsImh0dHBPbmx5IiwiZXJyb3IiLCJjb25zb2xlIiwianNvbiIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImNvbmZpZyIsIm1hdGNoZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});